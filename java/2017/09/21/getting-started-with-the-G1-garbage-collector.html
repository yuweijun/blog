<!doctype html>




<html class="theme-next mist">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">


















  

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">






  <link rel="alternate" href="/blog/atom.xml" title="一" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=5.0.1">






<meta name="description" content="OverviewThis tutorial covers the basics of how to use the G1 garbage collector and how it can be used with the Hotspot JVM. You will learn how the G1 collector functions internally, the key command li">
<meta property="og:type" content="article">
<meta property="og:title" content="getting started with the g1 garbage collector">
<meta property="og:url" content="http://www.4e00.com/java/2017/09/21/getting-started-with-the-G1-garbage-collector.html">
<meta property="og:site_name" content="一">
<meta property="og:description" content="OverviewThis tutorial covers the basics of how to use the G1 garbage collector and how it can be used with the Hotspot JVM. You will learn how the G1 collector functions internally, the key command li">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/1-jvm-architecture.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/2-jvm-components.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/6-hotspot-heap-structure.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-heap-allocation.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/1-cms-heap-structure.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/2-how-young-gc-works.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/3-young-generation-collection.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/4-after-young-gc.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/5-old-generation-collection-with-cms.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/6-old-generation-collection-concurrent-sweep.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-gc/7-old-generation-collection-after-sweeping.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-heap-structure.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-heap-allocation.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/yong-generation-g1.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/young-generation-g1-eden.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/young-generation-g1-end.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-initial-marking-phase.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-concurrent-marking-phase.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-remarking-phase.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-copying-clean-phase.png">
<meta property="og:image" content="http://www.4e00.com/blog/img/java/java-g1/g1-copying-clean-phase.png">
<meta property="og:updated_time" content="2020-03-06T01:24:26.124Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="getting started with the g1 garbage collector">
<meta name="twitter:description" content="OverviewThis tutorial covers the basics of how to use the G1 garbage collector and how it can be used with the Hotspot JVM. You will learn how the G1 collector functions internally, the key command li">
<meta name="twitter:image" content="http://www.4e00.com/blog/img/java/java-gc/1-jvm-architecture.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: false,
    motion: false,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://www.4e00.com/blog/java/2017/09/21/getting-started-with-the-G1-garbage-collector.html">

  <title> getting started with the g1 garbage collector | 一 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/" class="brand" rel="start">
      <span class="site-title">一</span>
    </a>
  </div>
  <p class="site-subtitle">{"type":"编程笔记"}</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      <li class="menu-item menu-item-search">
        <a href="https://www.google.com.hk/search?q=site%3Ahttp://www.4e00.com/blog/" class="popup-trigger">
          <i class="menu-item-icon fa fa-search fa-fw"></i>Search
        </a>
      </li>
    </ul>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                getting started with the g1 garbage collector
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-09-21T21:45:06+08:00" content="2017-09-21">
              2017-09-21
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>This tutorial covers the basics of how to use the G1 garbage collector and how it can be used with the Hotspot JVM. You will learn how the G1 collector functions internally, the key command line switches for using G1, and options for logging its operation.</p>
<h2 id="Java-Technology-and-the-JVM"><a href="#Java-Technology-and-the-JVM" class="headerlink" title="Java Technology and the JVM"></a>Java Technology and the JVM</h2><h3 id="Java-Overview"><a href="#Java-Overview" class="headerlink" title="Java Overview"></a>Java Overview</h3><p>Java is a programming language and computing platform first released by Sun Microsystems in 1995. It is the underlying technology that powers Java programs including utilities, games, and business applications. Java runs on more than 850 million personal computers worldwide, and on billions of devices worldwide, including mobile and TV devices. Java is composed of a number of key components that, as a whole, create the Java platform.</p>
<h3 id="Java-Runtime-Edition"><a href="#Java-Runtime-Edition" class="headerlink" title="Java Runtime Edition"></a>Java Runtime Edition</h3><p>When you download Java, you get the Java Runtime Environment (JRE). The JRE consists of the Java Virtual Machine (JVM), Java platform core classes, and supporting Java platform libraries. All three are required to run Java applications on your computer. With Java 7, Java applications run as desktop applications from the operating system, as a desktop application but installed from the Web using Java Web Start, or as a Web Embedded application in a browser (using JavaFX).</p>
<a id="more"></a>
<h3 id="Java-Programming-Language"><a href="#Java-Programming-Language" class="headerlink" title="Java Programming Language"></a>Java Programming Language</h3><p>Java is an object-oriented programming language that includes the following features.</p>
<p>Platform Independence - Java applications are compiled into bytecode which is stored in class files and loaded in a JVM. Since applications run in a JVM, they can be run on many different operating systems and devices.<br>Object-Oriented - Java is an object-oriented language that take many of the features of C and C++ and improves upon them.<br>Automatic Garbage Collection - Java automatically allocates and deallocates memory so programs are not burdened with that task.<br>Rich Standard Library - Java includes a vast number of premade objects that can be used to perform such tasks as input/output, networking, and date manipulation.<br>Java Development Kit</p>
<p>The Java Development Kit (JDK) is a collection of tools for developing Java applications. With the JDK, you can compile programs written in the Java Programming language and run them in a JVM. In addition, the JDK provides tools for packaging and distributing your applications.</p>
<p>The JDK and the JRE share the Java Application Programming Interfaces (Java API). The Java API is a collection of prepackaged libraries developers use to create Java applications. The Java API makes development easier by providing the tools to complete many common programming tasks including string manipulation, date/time processing, networking, and implementing data structures (e.g., lists, maps, stacks, and queues).</p>
<h3 id="Java-Virtual-Machine"><a href="#Java-Virtual-Machine" class="headerlink" title="Java Virtual Machine"></a>Java Virtual Machine</h3><p>The Java Virtual Machine (JVM) is an abstract computing machine. The JVM is a program that looks like a machine to the programs written to execute in it. This way, Java programs are written to the same set of interfaces and libraries. Each JVM implementation for a specific operating system, translates the Java programming instructions into instructions and commands that run on the local operating system. This way, Java programs achieve platform independence.</p>
<p>The first prototype implementation of the Java virtual machine, done at Sun Microsystems, Inc., emulated the Java virtual machine instruction set in software hosted by a handheld device that resembled a contemporary Personal Digital Assistant (PDA). Oracle&#39;s current implementations emulate the Java virtual machine on mobile, desktop and server devices, but the Java virtual machine does not assume any particular implementation technology, host hardware, or host operating system. It is not inherently interpreted, but can just as well be implemented by compiling its instruction set to that of a silicon CPU. It may also be implemented in microcode or directly in silicon.</p>
<p>The Java virtual machine knows nothing of the Java programming language, only of a particular binary format, the class file format. A class file contains Java virtual machine instructions (or bytecodes) and a symbol table, as well as other ancillary information.</p>
<p>For the sake of security, the Java virtual machine imposes strong syntactic and structural constraints on the code in a class file. However, any language with functionality that can be expressed in terms of a valid class file can be hosted by the Java virtual machine. Attracted by a generally available, machine-independent platform, implementors of other languages can turn to the Java virtual machine as a delivery vehicle for their languages.</p>
<p>(1) <a href="http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-1.html" target="_blank" rel="noopener">The Java Virtual Machine</a></p>
<h2 id="Exploring-the-JVM-Architecture"><a href="#Exploring-the-JVM-Architecture" class="headerlink" title="Exploring the JVM Architecture"></a>Exploring the JVM Architecture</h2><h3 id="Hotspot-Architecture"><a href="#Hotspot-Architecture" class="headerlink" title="Hotspot Architecture"></a>Hotspot Architecture</h3><p>The HotSpot JVM possesses an architecture that supports a strong foundation of features and capabilities and supports the ability to realize high performance and massive scalability. For example, the HotSpot JVM JIT compilers generate dynamic optimizations. In other words, they make optimization decisions while the Java application is running and generate high-performing native machine instructions targeted for the underlying system architecture. In addition, through the maturing evolution and continuous engineering of its runtime environment and multithreaded garbage collector, the HotSpot JVM yields high scalability on even the largest available computer systems.</p>
<img src="/blog/img/java/java-gc/1-jvm-architecture.png" class="image-lg" title="[1-jvm-architecture.png]">
<p>The main components of the JVM include the class loader, the runtime data areas, and the execution engine.</p>
<h3 id="Key-Hotspot-Components"><a href="#Key-Hotspot-Components" class="headerlink" title="Key Hotspot Components"></a>Key Hotspot Components</h3><p>The key components of the JVM that relate to performance are highlighted in the following image.</p>
<img src="/blog/img/java/java-gc/2-jvm-components.png" class="image-lg" title="[2-jvm-components.png]">
<p>There are three components of the JVM that are focused on when tuning performance. The heap is where your object data is stored. This area is then managed by the garbage collector selected at startup. Most tuning options relate to sizing the heap and choosing the most appropriate garbage collector for your situation. The JIT compiler also has a big impact on performance but rarely requires tuning with the newer versions of the JVM.</p>
<h2 id="Performance-Basics"><a href="#Performance-Basics" class="headerlink" title="Performance Basics"></a>Performance Basics</h2><p>Typically, when tuning a Java application, the focus is on one of two main goals: responsiveness or throughput. We will refer back to these concepts as the tutorial progresses.</p>
<h3 id="Responsiveness"><a href="#Responsiveness" class="headerlink" title="Responsiveness"></a>Responsiveness</h3><p>Responsiveness refers to how quickly an application or system responds with a requested piece of data. Examples include:</p>
<ol>
<li>How quickly a desktop UI responds to an event</li>
<li>How fast a website returns a page</li>
<li>How fast a database query is returned</li>
</ol>
<p>For applications that focus on responsiveness, large pause times are not acceptable. The focus is on responding in short periods of time.</p>
<h3 id="Throughput"><a href="#Throughput" class="headerlink" title="Throughput"></a>Throughput</h3><p>Throughput focuses on maximizing the amount of work by an application in a specific period of time. Examples of how throughput might be measured include:</p>
<ol>
<li>The number of transactions completed in a given time.</li>
<li>The number of jobs that a batch program can complete in an hour.</li>
<li>The number of database queries that can be completed in an hour.</li>
</ol>
<p>High pause times are acceptable for applications that focus on throughput. Since high throughput applications focus on benchmarks over longer periods of time, quick response time is not a consideration.</p>
<h2 id="The-G1-Garbage-Collector"><a href="#The-G1-Garbage-Collector" class="headerlink" title="The G1 Garbage Collector"></a>The G1 Garbage Collector</h2><p>The Garbage-First (G1) collector is a server-style garbage collector, targeted for multi-processor machines with large memories. It meets garbage collection (GC) pause time goals with a high probability, while achieving high throughput. The G1 garbage collector is fully supported in Oracle JDK 7 update 4 and later releases. The G1 collector is designed for applications that:</p>
<ol>
<li>Can operate concurrently with applications threads like the CMS collector.</li>
<li>Compact free space without lengthy GC induced pause times.</li>
<li>Need more predictable GC pause durations.</li>
<li>Do not want to sacrifice a lot of throughput performance.</li>
<li>Do not require a much larger Java heap.</li>
</ol>
<p>G1 is planned as the long term replacement for the Concurrent Mark-Sweep Collector (CMS). Comparing G1 with CMS, there are differences that make G1 a better solution. One difference is that G1 is a compacting collector. G1 compacts sufficiently to completely avoid the use of fine-grained free lists for allocation, and instead relies on regions. This considerably simplifies parts of the collector, and mostly eliminates potential fragmentation issues. Also, G1 offers more predictable garbage collection pauses than the CMS collector, and allows users to specify desired pause targets.</p>
<h3 id="G1-Operational-Overview"><a href="#G1-Operational-Overview" class="headerlink" title="G1 Operational Overview"></a>G1 Operational Overview</h3><p>The older garbage collectors (serial, parallel, CMS) all structure the heap into three sections: young generation, old generation, and permanent generation of a fixed memory size.</p>
<img src="/blog/img/java/java-gc/6-hotspot-heap-structure.png" class="image-lg" title="[6-hotspot-heap-structure.png]">
<p>All memory objects end up in one of these three sections.</p>
<p>The G1 collector takes a different approach.</p>
<img src="/blog/img/java/java-g1/g1-heap-allocation.png" class="image-lg" title="[g1-heap-allocation.png]">
<p>The heap is partitioned into a set of equal-sized heap regions, each a contiguous range of virtual memory. Certain region sets are assigned the same roles (eden, survivor, old) as in the older collectors, but there is not a fixed size for them. This provides greater flexibility in memory usage.</p>
<p>When performing garbage collections, G1 operates in a manner similar to the CMS collector. G1 performs a concurrent global marking phase to determine the liveness of objects throughout the heap. After the mark phase completes, G1 knows which regions are mostly empty. It collects in these regions first, which usually yields a large amount of free space. This is why this method of garbage collection is called Garbage-First. As the name suggests, G1 concentrates its collection and compaction activity on the areas of the heap that are likely to be full of reclaimable objects, that is, garbage. G1 uses a pause prediction model to meet a user-defined pause time target and selects the number of regions to collect based on the specified pause time target.</p>
<p>The regions identified by G1 as ripe for reclamation are garbage collected using evacuation. G1 copies objects from one or more regions of the heap to a single region on the heap, and in the process both compacts and frees up memory. This evacuation is performed in parallel on multi-processors, to decrease pause times and increase throughput. Thus, with each garbage collection, G1 continuously works to reduce fragmentation, working within the user defined pause times. This is beyond the capability of both the previous methods. CMS (Concurrent Mark Sweep ) garbage collector does not do compaction. ParallelOld garbage collection performs only whole-heap compaction, which results in considerable pause times.</p>
<p>It is important to note that G1 is not a real-time collector. It meets the set pause time target with high probability but not absolute certainty. Based on data from previous collections, G1 does an estimate of how many regions can be collected within the user specified target time. Thus, the collector has a reasonably accurate model of the cost of collecting the regions, and it uses this model to determine which and how many regions to collect while staying within the pause time target.</p>
<p>Note: G1 has both concurrent (runs along with application threads, e.g., refinement, marking, cleanup) and parallel (multi-threaded, e.g., stop the world) phases. Full garbage collections are still single threaded, but if tuned properly your applications should avoid full GCs.</p>
<h3 id="G1-Footprint"><a href="#G1-Footprint" class="headerlink" title="G1 Footprint"></a>G1 Footprint</h3><p>If you migrate from the ParallelOldGC or CMS collector to G1, you will likely see a larger JVM process size. This is largely related to &quot;accounting&quot; data structures such as Remembered Sets and Collection Sets.</p>
<p>Remembered Sets or RSets track object references into a given region. There is one RSet per region in the heap. The RSet enables the parallel and independent collection of a region. The overall footprint impact of RSets is less than 5%.</p>
<p>Collection Sets or CSets the set of regions that will be collected in a GC. All live data in a CSet is evacuated (copied/moved) during a GC. Sets of regions can be Eden, survivor, and/or old generation. CSets have a less than 1% impact on the size of the JVM.</p>
<h3 id="Recommended-Use-Cases-for-G1"><a href="#Recommended-Use-Cases-for-G1" class="headerlink" title="Recommended Use Cases for G1"></a>Recommended Use Cases for G1</h3><p>The first focus of G1 is to provide a solution for users running applications that require large heaps with limited GC latency. This means heap sizes of around 6GB or larger, and stable and predictable pause time below 0.5 seconds.</p>
<p>Applications running today with either the CMS or the ParallelOldGC garbage collector would benefit switching to G1 if the application has one or more of the following traits.</p>
<ol>
<li>Full GC durations are too long or too frequent.</li>
<li>The rate of object allocation rate or promotion varies significantly.</li>
<li>Undesired long garbage collection or compaction pauses (longer than 0.5 to 1 second)</li>
</ol>
<blockquote>
<p>Note: If you are using CMS or ParallelOldGC and your application is not experiencing long garbage collection pauses, it is fine to stay with your current collector. Changing to the G1 collector is not a requirement for using the latest JDK.</p>
</blockquote>
<h2 id="Reviewing-GC-with-the-CMS"><a href="#Reviewing-GC-with-the-CMS" class="headerlink" title="Reviewing GC with the CMS"></a>Reviewing GC with the CMS</h2><h3 id="Reviewing-Generational-GC-and-CMS"><a href="#Reviewing-Generational-GC-and-CMS" class="headerlink" title="Reviewing Generational GC and CMS"></a>Reviewing Generational GC and CMS</h3><p>The Concurrent Mark Sweep (CMS) collector (also referred to as the concurrent low pause collector) collects the tenured generation. It attempts to minimize the pauses due to garbage collection by doing most of the garbage collection work concurrently with the application threads. Normally the concurrent low pause collector does not copy or compact the live objects. A garbage collection is done without moving the live objects. If fragmentation becomes a problem, allocate a larger heap.</p>
<blockquote>
<p>Note: CMS collector on young generation uses the same algorithm as that of the parallel collector.</p>
</blockquote>
<h3 id="CMS-Collection-Phases"><a href="#CMS-Collection-Phases" class="headerlink" title="CMS Collection Phases"></a>CMS Collection Phases</h3><p>The CMS collector performs the following phases on the old generation of the heap:</p>
<table>    <thead>        <tr>            <th class="column-3">Phase</th>            <th>Description</th>        </tr>    </thead>    <tbody>        <tr>            <td class="text-left">(1) Initial Mark<br>            (Stop the World Event)</td>            <td class="text-left">Objects in old generation are &quot;marked&quot; as reachable including those objects which may be reachable from young generation. Pause times are typically short in duration relative to minor collection pause times.</td>        </tr>        <tr>            <td class="text-left">(2) Concurrent Marking</td>            <td class="text-left">Traverse the tenured generation object graph for reachable objects concurrently while Java application threads are executing. Starts scanning from marked objects and transitively marks all objects reachable from the roots. The mutators are executing during the concurrent phases 2, 3, and 5 and any objects allocated in the CMS generation during these phases (including promoted objects) are immediately marked as live.</td>        </tr>        <tr>            <td class="text-left">(3) Remark<br>            (Stop the World Event)</td>            <td class="text-left">Finds objects that were missed by the concurrent mark phase due to updates by Java application threads to objects after the concurrent collector had finished tracing that object.</td>        </tr>        <tr>            <td class="text-left">(4) Concurrent Sweep</td>            <td class="text-left">Collects the objects identified as unreachable during marking phases.  The collection of a dead object adds the space for the object to a free list for later allocation. Coalescing of dead objects may occur at this point. Note that live objects are not moved.</td>        </tr>        <tr>            <td class="text-left">(5) Resetting</td>            <td class="text-left">Prepare for next concurrent collection by clearing data structures.</td>        </tr>    </tbody></table>

<h2 id="Reviewing-Garbage-Collection-Steps"><a href="#Reviewing-Garbage-Collection-Steps" class="headerlink" title="Reviewing Garbage Collection Steps"></a>Reviewing Garbage Collection Steps</h2><p>Next, let&#39;s review CMS Collector operations step by step.</p>
<h3 id="Heap-Structure-for-CMS-Collector"><a href="#Heap-Structure-for-CMS-Collector" class="headerlink" title="Heap Structure for CMS Collector"></a>Heap Structure for CMS Collector</h3><p>The heap is split into three spaces.</p>
<img src="/blog/img/java/java-gc/1-cms-heap-structure.png" class="image-lg" title="[1-cms-heap-structure.png]">
<p>Young generation is split into Eden and two survivor spaces. Old generation is one contiguous space. Object collection is done in place. No compaction is done unless there is a full GC.</p>
<h3 id="How-Young-GC-works-in-CMS"><a href="#How-Young-GC-works-in-CMS" class="headerlink" title="How Young GC works in CMS"></a>How Young GC works in CMS</h3><p>The young generation is colored light green and the old generation in blue. This is what the CMS might look like if your application has been running for a while. Objects are scattered around the old generation area.</p>
<img src="/blog/img/java/java-gc/2-how-young-gc-works.png" class="image-lg" title="[2-how-young-gc-works.png]">
<p>With CMS, old generation objects are deallocated in place. They are not moved around. The space is not compacted unless there is a full GC.</p>
<h3 id="Young-Generation-Collection"><a href="#Young-Generation-Collection" class="headerlink" title="Young Generation Collection"></a>Young Generation Collection</h3><p>Live objects are copied from the Eden space and survivor space to the other survivor space. Any older objects that have reached their aging threshold are promoted to old generation.</p>
<img src="/blog/img/java/java-gc/3-young-generation-collection.png" class="image-lg" title="[3-young-generation-collection.png]">
<h3 id="After-Young-GC"><a href="#After-Young-GC" class="headerlink" title="After Young GC"></a>After Young GC</h3><p>After a young GC, the Eden space is cleared and one of the survivor spaces is cleared.</p>
<img src="/blog/img/java/java-gc/4-after-young-gc.png" class="image-lg" title="[4-after-young-gc.png]">
<p>Newly promoted objects are shown in dark blue on the diagram. The green objects are surviving young generation objects that have not yet been promoted to old generation.</p>
<h3 id="Old-Generation-Collection-with-CMS"><a href="#Old-Generation-Collection-with-CMS" class="headerlink" title="Old Generation Collection with CMS"></a>Old Generation Collection with CMS</h3><p>Two stop the world events take place: initial mark and remark. When the old generation reaches a certain occupancy rate, the CMS is kicked off.</p>
<img src="/blog/img/java/java-gc/5-old-generation-collection-with-cms.png" class="image-lg" title="[5-old-generation-collection-with-cms.png]">
<ol>
<li>(1) Initial mark is a short pause phase where live (reachable) objects are marked.</li>
<li>(2) Concurrent marking finds live objects while the application continues to execute.</li>
<li>Finally, in the (3) remark phase, objects are found that were missed during (2) concurrent marking in the previous phase.</li>
</ol>
<h3 id="Old-Generation-Collection-Concurrent-Sweep"><a href="#Old-Generation-Collection-Concurrent-Sweep" class="headerlink" title="Old Generation Collection - Concurrent Sweep"></a>Old Generation Collection - Concurrent Sweep</h3><p>Objects that were not marked in the previous phase are deallocated in place. There is no compaction.</p>
<img src="/blog/img/java/java-gc/6-old-generation-collection-concurrent-sweep.png" class="image-lg" title="[6-old-generation-collection-concurrent-sweep.png]">
<blockquote>
<p>Note: Unmarked objects == Dead Objects</p>
</blockquote>
<h3 id="Old-Generation-Collection-After-Sweeping"><a href="#Old-Generation-Collection-After-Sweeping" class="headerlink" title="Old Generation Collection - After Sweeping"></a>Old Generation Collection - After Sweeping</h3><p>After the (4) Sweeping phase, you can see that a lot of memory has been freed up. You will also notice that no compaction has been done.</p>
<img src="/blog/img/java/java-gc/7-old-generation-collection-after-sweeping.png" class="image-lg" title="[7-old-generation-collection-after-sweeping.png]">
<p>Finally, the CMS collector will move through the (5) resetting phase and wait for the next time the GC threshold is reached.</p>
<h2 id="The-G1-Garbage-Collector-Step-by-Step"><a href="#The-G1-Garbage-Collector-Step-by-Step" class="headerlink" title="The G1 Garbage Collector Step by Step"></a>The G1 Garbage Collector Step by Step</h2><p>The G1 collector takes a different approach to allocating the heap. The pictures that follow review the G1 system step by step.</p>
<h3 id="G1-Heap-Structure"><a href="#G1-Heap-Structure" class="headerlink" title="G1 Heap Structure"></a>G1 Heap Structure</h3><p>The heap is one memory area split into many fixed sized regions.</p>
<img src="/blog/img/java/java-g1/g1-heap-structure.png" class="image-lg" title="[g1-heap-structure.png]">
<p>Region size is chosen by the JVM at startup. The JVM generally targets around 2000 regions varying in size from 1 to 32Mb.</p>
<h3 id="G1-Heap-Allocation"><a href="#G1-Heap-Allocation" class="headerlink" title="G1 Heap Allocation"></a>G1 Heap Allocation</h3><p>In reality, these regions are mapped into logical representations of Eden, Survivor, and old generation spaces.</p>
<img src="/blog/img/java/java-g1/g1-heap-allocation.png" class="image-lg" title="[g1-heap-allocation.png]">
<p>The colors in the picture shows which region is associated with which role. Live objects are evacuated (i.e., copied or moved) from one region to another. Regions are designed to be collected in parallel with or without stopping all other application threads.</p>
<p>As shown regions can be allocated into Eden, survivor, and old generation regions. In addition, there is a fourth type of object known as Humongous regions. These regions are designed to hold objects that are 50% the size of a standard region or larger. They are stored as a set of contiguous regions. Finally the last type of regions would be the unused areas of the heap.</p>
<blockquote>
<p>Note: At the time of this writing, collecting humongous objects has not been optimized. Therefore, you should avoid creating objects of this size.</p>
</blockquote>
<h3 id="Young-Generation-in-G1"><a href="#Young-Generation-in-G1" class="headerlink" title="Young Generation in G1"></a>Young Generation in G1</h3><p>The heap is split into approximately 2000 regions. Minimum size is 1Mb and maximum size is 32Mb. Blue regions hold old generation objects and green regions hold young generation objects.<br><img src="/blog/img/java/java-g1/yong-generation-g1.png" class="image-lg" title="[yong-generation-g1.png]"></p>
<p>Note that the regions are not required to be contiguous like the older garbage collectors.</p>
<h3 id="A-Young-GC-in-G1"><a href="#A-Young-GC-in-G1" class="headerlink" title="A Young GC in G1"></a>A Young GC in G1</h3><p>Live objects are evacuated (i.e., copied or moved) to one or more survivor regions. If the aging threshold is met, some of the objects are promoted to old generation regions.</p>
<img src="/blog/img/java/java-g1/young-generation-g1-eden.png" class="image-lg" title="[young-generation-g1-eden.png]">
<p>This is a stop the world (STW) pause. Eden size and survivor size is calculated for the next young GC. Accounting information is kept to help calculate the size. Things like the pause time goal are taken into consideration.</p>
<p>This approach makes it very easy to resize regions, making them bigger or smaller as needed.</p>
<h3 id="End-of-a-Young-GC-with-G1"><a href="#End-of-a-Young-GC-with-G1" class="headerlink" title="End of a Young GC with G1"></a>End of a Young GC with G1</h3><p>Live objects have been evacuated to survivor regions or to old generation regions.</p>
<img src="/blog/img/java/java-g1/young-generation-g1-end.png" class="image-lg" title="[young-generation-g1-end.png]">
<p>Recently promoted objects are shown in dark blue. Survivor regions in green.</p>
<p>In summary, the following can be said about the young generation in G1:</p>
<ol>
<li>The heap is a single memory space split into regions.</li>
<li>Young generation memory is composed of a set of non-contiguous regions. This makes it easy to resize when needed.</li>
<li>Young generation garbage collections, or young GCs, are stop the world events. All application threads are stopped for the operation.</li>
<li>The young GC is done in parallel using multiple threads.</li>
<li>Live objects are copied to new survivor or old generation regions.</li>
</ol>
<h2 id="Old-Generation-Collection-with-G1"><a href="#Old-Generation-Collection-with-G1" class="headerlink" title="Old Generation Collection with G1"></a>Old Generation Collection with G1</h2><p>Like the CMS collector, the G1 collector is designed to be a low pause collector for old generation objects. The following table describes the G1 collection phases on old generation.</p>
<h3 id="G1-Collection-Phases-Concurrent-Marking-Cycle-Phases"><a href="#G1-Collection-Phases-Concurrent-Marking-Cycle-Phases" class="headerlink" title="G1 Collection Phases - Concurrent Marking Cycle Phases"></a>G1 Collection Phases - Concurrent Marking Cycle Phases</h3><p>The G1 collector performs the following phases on the old generation of the heap. Note that some phases are part of a young generation collection.</p>
<table>    <thead>        <tr>            <th class="column-3">Phase</th>            <th>Description</th>        </tr>    </thead>    <tbody>        <tr>            <td class="text-left">(1) Initial Mark<br>            (Stop the World Event)</td>            <td class="text-left">This is a stop the world event. With G1, it is piggybacked on a normal young GC. Mark survivor regions (root regions) which may have references to objects in old generation.</td>        </tr>        <tr>            <td class="text-left">(2) Root Region Scanning</td>            <td class="text-left">Scan survivor regions for references into the old generation. This happens while the application continues to run. The phase must be completed before a young GC can occur.</td>        </tr>        <tr>            <td class="text-left">(3) Concurrent Marking</td>            <td class="text-left">Find live objects over the entire heap. This happens while the application is running. This phase can be interrupted by young generation garbage collections.</td>        </tr>        <tr>            <td class="text-left">(4) Remark<br>            (Stop the World Event)</td>            <td class="text-left">Completes the marking of live object in the heap. Uses an algorithm called snapshot-at-the-beginning (SATB) which is much faster than what was used in the CMS collector.</td>        </tr>        <tr>            <td class="text-left">(5) Cleanup<br>            (Stop the World Event and Concurrent)</td>            <td class="text-left">1. Performs accounting on live objects and completely free regions. (Stop the world)<br>            2. Scrubs the Remembered Sets. (Stop the world)<br>            3. Reset the empty regions and return them to the free list. (Concurrent)</td>        </tr>        <tr>            <td class="text-left">(*) Copying (Stop the World Event)</td>            <td class="text-left">These are the stop the world pauses to evacuate or copy live objects to new unused regions. This can be done with young generation regions which are logged as [GC pause (young)]. Or both young and old generation regions which are logged as [GC Pause (mixed)].</td>        </tr>    </tbody></table>

<h3 id="G1-Old-Generation-Collection-Step-by-Step"><a href="#G1-Old-Generation-Collection-Step-by-Step" class="headerlink" title="G1 Old Generation Collection Step by Step"></a>G1 Old Generation Collection Step by Step</h3><p>With the phases defined, let&#39;s look at how they interact with the old generation in the G1 collector.</p>
<h3 id="Initial-Marking-Phase"><a href="#Initial-Marking-Phase" class="headerlink" title="Initial Marking Phase"></a>Initial Marking Phase</h3><p>Initial marking of live object is piggybacked on a young generation garbage collection. In the logs this is noted as GC pause (young)(inital-mark).</p>
<img src="/blog/img/java/java-g1/g1-initial-marking-phase.png" class="image-lg" title="[g1-initial-marking-phase.png]">
<h3 id="Concurrent-Marking-Phase"><a href="#Concurrent-Marking-Phase" class="headerlink" title="Concurrent Marking Phase"></a>Concurrent Marking Phase</h3><p>If empty regions are found (as denoted by the &quot;X&quot;), they are removed immediately in the Remark phase. Also, &quot;accounting&quot; information that determines liveness is calculated.</p>
<img src="/blog/img/java/java-g1/g1-concurrent-marking-phase.png" class="image-lg" title="[g1-concurrent-marking-phase.png]">
<h3 id="Remark-Phase"><a href="#Remark-Phase" class="headerlink" title="Remark Phase"></a>Remark Phase</h3><p>Empty regions are removed and reclaimed. Region liveness is now calculated for all regions.</p>
<img src="/blog/img/java/java-g1/g1-remarking-phase.png" class="image-lg" title="[g1-remarking-phase.png]">
<h3 id="Copying-Cleanup-Phase"><a href="#Copying-Cleanup-Phase" class="headerlink" title="Copying/Cleanup Phase"></a>Copying/Cleanup Phase</h3><p>G1 selects the regions with the lowest &quot;liveness&quot;, those regions which can be collected the fastest. Then those regions are collected at the same time as a young GC. This is denoted in the logs as [GC pause (mixed)]. So both young and old generations are collected at the same time.</p>
<img src="/blog/img/java/java-g1/g1-copying-clean-phase.png" class="image-lg" title="[g1-copying-clean-phase.png]">
<h3 id="After-Copying-Cleanup-Phase"><a href="#After-Copying-Cleanup-Phase" class="headerlink" title="After Copying/Cleanup Phase"></a>After Copying/Cleanup Phase</h3><p>The regions selected have been collected and compacted into the dark blue region and the dark green region shown in the diagram.</p>
<img src="/blog/img/java/java-g1/g1-copying-clean-phase.png" class="image-lg" title="[g1-copying-clean-phase.png]">
<h3 id="Summary-of-Old-Generation-GC"><a href="#Summary-of-Old-Generation-GC" class="headerlink" title="Summary of Old Generation GC"></a>Summary of Old Generation GC</h3><p>In summary, there are a few key points we can make about the G1 garbage collection on the old generation.</p>
<ol>
<li>Concurrent Marking Phase<ul>
<li>Liveness information is calculated concurrently while the application is running.</li>
<li>This liveness information identifies which regions will be best to reclaim during an evacuation pause.</li>
<li>There is no sweeping phase like in CMS.</li>
</ul>
</li>
<li>Remark Phase<ul>
<li>Uses the Snapshot-at-the-Beginning (SATB) algorithm which is much faster then what was used with CMS.</li>
<li>Completely empty regions are reclaimed.</li>
</ul>
</li>
<li>Copying/Cleanup Phase<ul>
<li>Young generation and old generation are reclaimed at the same time.</li>
<li>Old generation regions are selected based on their liveness.</li>
</ul>
</li>
</ol>
<h2 id="Command-Line-Options-and-Best-Practices"><a href="#Command-Line-Options-and-Best-Practices" class="headerlink" title="Command Line Options and Best Practices"></a>Command Line Options and Best Practices</h2><p>In this section let&#39;s take a look at the various command line options for G1.</p>
<h3 id="Basic-Command-Line"><a href="#Basic-Command-Line" class="headerlink" title="Basic Command Line"></a>Basic Command Line</h3><p>To enable the G1 Collector use: <code>-XX:+UseG1GC</code></p>
<p>Here is a sample command line for starting the <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">Java2Demo</a> included in the JDK demos and samples download:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">java</span> -Xmx50m -Xms50m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -jar c:\javademos\demo\jfc\Java2D\Java2demo.jar</span></pre></td></tr></table></figure>
<h3 id="Key-Command-Line-Switches"><a href="#Key-Command-Line-Switches" class="headerlink" title="Key Command Line Switches"></a>Key Command Line Switches</h3><ol>
<li><code>-XX:+UseG1GC</code> - Tells the JVM to use the G1 Garbage collector.</li>
<li><code>-XX:MaxGCPauseMillis=200</code> - Sets a target for the maximum GC pause time. This is a soft goal, and the JVM will make its best effort to achieve it. Therefore, the pause time goal will sometimes not be met. The default value is 200 milliseconds.</li>
<li><code>-XX:InitiatingHeapOccupancyPercent=45</code> - Percentage of the (entire) heap occupancy to start a concurrent GC cycle. It is used by G1 to trigger a concurrent GC cycle based on the occupancy of the entire heap, not just one of the generations. A value of 0 denotes &#39;do constant GC cycles&#39;. The default value is 45 (i.e., 45% full or occupied).</li>
</ol>
<h3 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h3><p>There are a few best practices you should follow when using G1.</p>
<h4 id="Do-not-Set-Young-Generation-Size"><a href="#Do-not-Set-Young-Generation-Size" class="headerlink" title="Do not Set Young Generation Size"></a>Do not Set Young Generation Size</h4><p>Explicitly setting young generation size via <code>-Xmn</code> meddles with the default behavior of the G1 collector.</p>
<ol>
<li>G1 will no longer respect the pause time target for collections. So in essence, setting the young generation size disables the pause time goal.</li>
<li>G1 is no longer able to expand and contract the young generation space as needed. Since the size is fixed, no changes can be made to the size.</li>
</ol>
<h4 id="Response-Time-Metrics"><a href="#Response-Time-Metrics" class="headerlink" title="Response Time Metrics"></a>Response Time Metrics</h4><p>Instead of using average response time (ART) as a metric to set the <code>XX:MaxGCPauseMillis=&lt;N&gt;</code>, consider setting value that will meet the goal 90% of the time or more. This means 90% of users making a request will not experience a response time higher than the goal. Remember, the pause time is a goal and is not guaranteed to always be met.</p>
<h4 id="What-is-an-Evacuation-Failure"><a href="#What-is-an-Evacuation-Failure" class="headerlink" title="What is an Evacuation Failure?"></a>What is an Evacuation Failure?</h4><p>A promotion failure that happens when a JVM runs out of heap regions during the GC for either survivors and promoted objects. The heap can&#39;t expand because it is already at max. This is indicated in the GC logs when using <code>-XX:+PrintGCDetails</code> by <code>to-space</code> overflow. This is expensive!</p>
<ol>
<li>GC still has to continue so space has to be freed up.</li>
<li>Unsuccessfully copied objects have to be tenured in place.</li>
<li>Any updates to RSets of regions in the CSet have to be regenerated.</li>
<li>All of these steps are expensive.</li>
</ol>
<h4 id="How-to-avoid-Evacuation-Failure"><a href="#How-to-avoid-Evacuation-Failure" class="headerlink" title="How to avoid Evacuation Failure"></a>How to avoid Evacuation Failure</h4><p>To avoid evacuation failure, consider the following options.</p>
<ol>
<li>Increase heap size<ul>
<li>Increase the <code>-XX:G1ReservePercent=n</code>, the default is <code>10</code>.</li>
<li>G1 creates a false ceiling by trying to leave the reserve memory free in case more <code>to-space</code> is desired.</li>
</ul>
</li>
<li>Start the marking cycle earlier</li>
<li>Increase the number of marking threads using the <code>-XX:ConcGCThreads=n</code> option.</li>
</ol>
<h3 id="Complete-List-of-G1-GC-Switches"><a href="#Complete-List-of-G1-GC-Switches" class="headerlink" title="Complete List of G1 GC Switches"></a>Complete List of G1 GC Switches</h3><p>This is the complete list of G1 GC switches. Remember to use the best practices outlined above.</p>
<table>    <thead>        <tr>            <th class="column-3">Option and Default Value</th>            <th>Description</th>        </tr>    </thead>    <tbody>        <tr>            <td class="text-left">-XX:+UseG1GC</td>            <td class="text-left">Use the Garbage First (G1) Collector</td>        </tr>        <tr>            <td class="text-left">-XX:MaxGCPauseMillis=n</td>            <td class="text-left">Sets a target for the maximum GC pause time. This is a soft goal, and the JVM will make its best effort to achieve it.</td>        </tr>        <tr>            <td class="text-left">-XX:InitiatingHeapOccupancyPercent=n</td>            <td class="text-left">Percentage of the (entire) heap occupancy to start a concurrent GC cycle. It is used by GCs that trigger a concurrent GC cycle based on the occupancy of the entire heap, not just one of the generations (e.g., G1). A value of 0 denotes &#39;do constant GC cycles&#39;.  The default value is 45.</td>        </tr>        <tr>            <td class="text-left">-XX:NewRatio=n</td>            <td class="text-left">Ratio of new/old generation sizes. The default value is 2.</td>        </tr>        <tr>            <td class="text-left">-XX:SurvivorRatio=n</td>            <td class="text-left">Ratio of eden/survivor space size. The default value is 8.</td>        </tr>        <tr>            <td class="text-left">-XX:MaxTenuringThreshold=n</td>            <td class="text-left">Maximum value for tenuring threshold. The default value is 15.</td>        </tr>        <tr>            <td class="text-left">-XX:ParallelGCThreads=n</td>            <td class="text-left">Sets the number of threads used during parallel phases of the garbage collectors. The default value varies with the platform on which the JVM is running.</td>        </tr>        <tr>            <td class="text-left">-XX:ConcGCThreads=n</td>            <td class="text-left">Number of threads concurrent garbage collectors will use. The default value varies with the platform on which the JVM is running.</td>        </tr>        <tr>            <td class="text-left">-XX:G1ReservePercent=n</td>            <td class="text-left">Sets the amount of heap that is reserved as a false ceiling to reduce the possibility of promotion failure. The default value is 10.</td>        </tr>        <tr>            <td class="text-left">-XX:G1HeapRegionSize=n</td>            <td class="text-left">With G1 the Java heap is subdivided into uniformly sized regions. This sets the size of the individual sub-divisions. The default value of this parameter is determined ergonomically based upon heap size.  The minimum value is 1Mb and the maximum value is 32Mb.</td>        </tr>    </tbody></table>

<h2 id="Logging-GC-with-G1"><a href="#Logging-GC-with-G1" class="headerlink" title="Logging GC with G1"></a>Logging GC with G1</h2><p>The final topic we need to cover is using logging information to analyze performance with the G1 collector. This section provides a quick overview of the switches you can use to collect data and the information that is printed in the logs.</p>
<h3 id="Setting-the-Log-Detail"><a href="#Setting-the-Log-Detail" class="headerlink" title="Setting the Log Detail"></a>Setting the Log Detail</h3><p>You can set the detail to three different levels of detail.</p>
<p>(1) <code>-verbosegc</code> (which is equivalent to <code>-XX:+PrintGC</code>) sets the detail level of the log to fine.</p>
<h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[GC pause (G1 Humongous Allocation) (young) (initial-mark) 24M- &gt;21M(64M), 0.2349730 secs]</span><span class="line">[GC pause (G1 Evacuation Pause) (mixed) 66M-&gt;21M(236M), 0.1625268 secs]</span></pre></td></tr></table></figure>
<p>(2) <code>-XX:+PrintGCDetails</code> sets the detail level to finer. The options shows the following information:</p>
<ol>
<li>Average, Min, and Max time are displayed for each phase.</li>
<li>Root Scan, RSet Updating (with processed buffers information), RSet Scan, Object Copy, Termination (with number of attempts).</li>
<li>Also shows “other” time such as time spent choosing CSet, reference processing, reference enqueuing and freeing CSet.</li>
<li>Shows the Eden, Survivors and Total Heap occupancies.</li>
</ol>
<h4 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Ext Root Scanning (ms): Avg: 1.7 Min: 0.0 Max: 3.7 Diff: 3.7]</span><span class="line">[Eden: 818M(818M)-&gt;0B(714M) Survivors: 0B-&gt;104M Heap: 836M(4096M)-&gt;409M(4096M)]</span></pre></td></tr></table></figure>
<p>(3) <code>-XX:+UnlockExperimentalVMOptions -XX:G1LogLevel=finest</code> sets the detail level to its finest. Like finer but includes individual worker thread information.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Ext Root Scanning (ms): 2.1 2.4 2.0 0.0</span><span class="line">           Avg: 1.6 Min: 0.0 Max: 2.4 Diff: 2.3]</span><span class="line">       [Update RS (ms):  0.4  0.2  0.4  0.0</span><span class="line">           Avg: 0.2 Min: 0.0 Max: 0.4 Diff: 0.4]</span><span class="line">           [Processed Buffers : 5 1 10 0</span><span class="line">           Sum: 16, Avg: 4, Min: 0, Max: 10, Diff: 10]</span></pre></td></tr></table></figure>
<h3 id="Determining-Time"><a href="#Determining-Time" class="headerlink" title="Determining Time"></a>Determining Time</h3><p>A couple of switches determine how time is displayed in the GC log.</p>
<p>(1) <code>-XX:+PrintGCTimeStamps</code> - Shows the elapsed time since the JVM started.</p>
<h4 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.729: [GC pause (young) 46M-&gt;35M(1332M), 0.0310029 secs]</span></pre></td></tr></table></figure>
<p>(2) <code>-XX:+PrintGCDateStamps</code> - Adds a time of day prefix to each entry.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2012-05-02T11:16:32.057+0200: [GC pause (young) 46M-&gt;35M(1332M), 0.0317225 secs]</span></pre></td></tr></table></figure>
<h3 id="Understanding-G1-Log"><a href="#Understanding-G1-Log" class="headerlink" title="Understanding G1 Log"></a>Understanding G1 Log</h3><p>To understand the log, this section defines a number of terms using actual GC log output. The following examples show output from the log with explanations of the terms and values you will find in it.</p>
<blockquote>
<p>Note: For more information check out Poonam Bajaj&#39;s Blog post on G1 GC logs.</p>
</blockquote>
<h3 id="G1-Logging-Terms-Index"><a href="#G1-Logging-Terms-Index" class="headerlink" title="G1 Logging Terms Index"></a>G1 Logging Terms Index</h3><ul>
<li>Clear CT</li>
<li>CSet</li>
<li>External Root Scanning</li>
<li>Free CSet</li>
<li>GC Worker End</li>
<li>GC Worker Other</li>
<li>Object Copy</li>
<li>Other</li>
<li>Parallel Time</li>
<li>Ref Eng</li>
<li>Ref Proc</li>
<li>Scanning Remembered Sets</li>
<li>Termination Time</li>
<li>Update Remembered Set</li>
<li>Worker Start</li>
<li>Parallel Time</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">414.557: [GC pause (young), 0.03039600 secs] [Parallel Time: 22.9 ms]</span><span class="line">[GC Worker Start (ms): 7096.0 7096.0 7096.1 7096.1 706.1 7096.1 7096.1 7096.1 7096.2 7096.2 7096.2 7096.2</span><span class="line">       Avg: 7096.1, Min: 7096.0, Max: 7096.2, Diff: 0.2]</span></pre></td></tr></table></figure>
<ol>
<li>Parallel Time – Overall elapsed time of the main parallel part of the pause</li>
<li>Worker Start – Timestamp at which the workers start</li>
</ol>
<blockquote>
<p>Note: The logs are ordered on thread id and are consistent on each entry</p>
</blockquote>
<h4 id="External-Root-Scanning"><a href="#External-Root-Scanning" class="headerlink" title="External Root Scanning"></a>External Root Scanning</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Ext Root Scanning (ms): 3.1 3.4 3.4 3.0 4.2 2.0 3.6 3.2 3.4 7.7 3.7 4.4</span><span class="line">     Avg: 3.8, Min: 2.0, Max: 7.7, Diff: 5.7]</span></pre></td></tr></table></figure>
<p>External root scanning - The time taken to scan the external root (e.g., things like system dictionary that point into the heap.)</p>
<h4 id="Update-Remembered-Set"><a href="#Update-Remembered-Set" class="headerlink" title="Update Remembered Set"></a>Update Remembered Set</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Update RS (ms): 0.1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 Avg: 0.0, Min: 0.0, Max: 0.1, Diff: 0.1]</span><span class="line">   [Processed Buffers : 26 0 0 0 0 0 0 0 0 0 0 0</span><span class="line">    Sum: 26, Avg: 2, Min: 0, Max: 26, Diff: 26]</span></pre></td></tr></table></figure>
<p>Update Remembered Set - Any buffers that are completed but have not yet been processed by the concurrent refinement thread before the start of the pause have to be updated. Time depends on density of the cards. The more cards, the longer it will take.</p>
<h4 id="Scanning-Remembered-Sets"><a href="#Scanning-Remembered-Sets" class="headerlink" title="Scanning Remembered Sets"></a>Scanning Remembered Sets</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Scan RS (ms): 0.4 0.2 0.1 0.3 0.0 0.0 0.1 0.2 0.0 0.1 0.0 0.0 Avg: 0.1, Min: 0.0, Max: 0.4, Diff: 0.3]F</span></pre></td></tr></table></figure>
<p>Scanning Remembered Sets - Look for pointers that point into the Collection Set.</p>
<h4 id="Object-Copy"><a href="#Object-Copy" class="headerlink" title="Object Copy"></a>Object Copy</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Object Copy (ms): 16.7 16.7 16.7 16.9 16.0 18.1 16.5 16.8 16.7 12.3 16.4 15.7 Avg: 16.3, Min: 12.3, Max:  18.1, Diff: 5.8]</span></pre></td></tr></table></figure>
<p>Object copy – The time that each individual thread spent copying and evacuating objects.</p>
<h4 id="Termination-Time"><a href="#Termination-Time" class="headerlink" title="Termination Time"></a>Termination Time</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Termination (ms): 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0</span><span class="line">0.0 Avg: 0.0, Min: 0.0, Max: 0.0, Diff: 0.0] [Termination Attempts : 1 1 1 1 1 1 1 1 1 1 1 1 Sum: 12, Avg: 1, Min: 1, Max: 1, Diff: 0]</span></pre></td></tr></table></figure>
<p>Termination time - When a worker thread is finished with its particular set of objects to copy and scan, it enters the termination protocol. It looks for work to steal and once it&#39;s done with that work it again enters the termination protocol. Termination attempt counts all the attempts to steal work.</p>
<h4 id="GC-Worker-End"><a href="#GC-Worker-End" class="headerlink" title="GC Worker End"></a>GC Worker End</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[GC Worker End (ms): 7116.4 7116.3 7116.4 7116.3 7116.4 7116.3 7116.4 7116.4 7116.4 7116.4 7116.3 7116.3</span><span class="line">    Avg: 7116.4, Min: 7116.3, Max: 7116.4, Diff:   0.1]</span><span class="line">[GC Worker (ms): 20.4 20.3 20.3 20.2 20.3 20.2 20.2 20.2 20.3 20.2 20.1 20.1</span><span class="line">     Avg: 20.2, Min: 20.1, Max: 20.4, Diff: 0.3]</span></pre></td></tr></table></figure>
<ol>
<li>GC worker end time – Timestamp when the individual GC worker stops.</li>
<li>GC worker time – Time taken by individual GC worker thread.</li>
</ol>
<h4 id="GC-Worker-Other"><a href="#GC-Worker-Other" class="headerlink" title="GC Worker Other"></a>GC Worker Other</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[GC Worker Other (ms): 2.6 2.6 2.7 2.7 2.7 2.7 2.7 2.8 2.8 2.8 2.8 2.8</span><span class="line">    Avg: 2.7, Min: 2.6, Max: 2.8, Diff: 0.2]</span></pre></td></tr></table></figure>
<p>GC worker other – The time (for each GC thread) that can&#39;t be attributed to the worker phases listed previously. Should be quite low. In the past, we have seen excessively high values and they have been attributed to bottlenecks in other parts of the JVM (e.g., increases in the Code Cache occupancy with Tiered).</p>
<h4 id="Clear-CT"><a href="#Clear-CT" class="headerlink" title="Clear CT"></a>Clear CT</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Clear CT: 0.6 ms]</span></pre></td></tr></table></figure>
<p>Time taken to clear the card table of RSet scanning meta-data</p>
<h4 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Other: 6.8 ms]</span></pre></td></tr></table></figure>
<p>Time taken for various other sequential phases of the GC pause.</p>
<h4 id="CSet"><a href="#CSet" class="headerlink" title="CSet"></a>CSet</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Choose CSet: 0.1 ms]</span></pre></td></tr></table></figure>
<p>Time taken finalizing the set of regions to collect. Usually very small; slightly longer when having to select old.</p>
<h4 id="Ref-Proc"><a href="#Ref-Proc" class="headerlink" title="Ref Proc"></a>Ref Proc</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Ref Proc: 4.4 ms]</span></pre></td></tr></table></figure>
<p>Time spent processing soft, weak, etc. references deferred from the prior phases of the GC.</p>
<h4 id="Ref-Enq"><a href="#Ref-Enq" class="headerlink" title="Ref Enq"></a>Ref Enq</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Ref Enq: 0.1 ms]</span></pre></td></tr></table></figure>
<p>Time spent placing soft, weak, etc. references on to the pending list.</p>
<h4 id="Free-CSet"><a href="#Free-CSet" class="headerlink" title="Free CSet"></a>Free CSet</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Free CSet: 2.0 ms]</span></pre></td></tr></table></figure>
<p>Time spent freeing the set of regions that have just been collected, including their remembered sets.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In this OBE, you have been given an overview of the G1 garbage collector included in the Java JVM. First you learned how the Heap and the Garbage Collector are key parts of any Java JVM. Next your reviewed how garbage collection works using the CMS collector and the G1 collector. Next you learned about the G1 command line switches and the best practices for using them. Finally, you learned about logging object and data included in the GC logs.</p>
<p>In this tutorial, you have learned:</p>
<ol>
<li>The components of the Java JVM</li>
<li>An overview of the G1 Collector</li>
<li>A review of the CMS collector</li>
<li>A review of the G1 collector</li>
<li>Command line switches and best practices</li>
<li>Logging with G1</li>
</ol>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><p>For more information and related information please see these site and links.</p>
<ul>
<li>Java HotSpot VM Options</li>
<li>The Garbage First(G1) Garbage Collector</li>
<li>Poonam Bajaj G1 GC Blog Post</li>
<li>Java SE 7: Develop Rich Client Applications</li>
<li>Java Performance - Charlie Hunt and Binu John</li>
<li>Oracle Learning Library</li>
</ul>
<h3 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h3><p>Curriculum Developer: Michael J Williams<br>QA: Krishnanjani Chitta</p>
<h2 id="Example-GC-log-of-G1-using-Java2Demo-jar"><a href="#Example-GC-log-of-G1-using-Java2Demo-jar" class="headerlink" title="Example GC log of G1 using Java2Demo.jar"></a>Example GC log of G1 using Java2Demo.jar</h2><p>Download <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">jdk-8u144-linux-x64-demos.tar.gz</a> and extract <code>Java2Demo.jar</code> from it.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">java</span> -Xmx50m -Xms50m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+PrintGC -XX:+PrintGCDetails -XX:+UnlockExperimentalVMOptions -XX:G1LogLevel=finest -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -jar demo/jfc/Java2D/Java2Demo.jar</span><span class="line output">2017-09-21T14:20:49.177+0800: 0.405: [GC pause (G1 Evacuation Pause) (young), 0.0070815 secs]</span><span class="line output">  [Parallel Time: 4.8 ms, GC Workers: 4]</span><span class="line output">  [GC Worker Start (ms): 406.4 406.4 406.4 406.9</span><span class="line output">  Min: 406.4, Avg: 406.5, Max: 406.9, Diff: 0.5]</span><span class="line output">  [Ext Root Scanning (ms): 2.2 0.8 0.5 0.4</span><span class="line output">  Min: 0.4, Avg: 1.0, Max: 2.2, Diff: 1.8, Sum: 3.9]</span><span class="line output">  [Thread Roots (ms): 0.0 0.8 0.3 0.0</span><span class="line output">  Min: 0.0, Avg: 0.3, Max: 0.8, Diff: 0.8, Sum: 1.1]</span><span class="line output">  [StringTable Roots (ms): 0.0 0.0 0.4 0.5</span><span class="line output">  Min: 0.0, Avg: 0.2, Max: 0.5, Diff: 0.5, Sum: 0.9]</span><span class="line output">  [Universe Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [JNI Handles Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [ObjectSynchronizer Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [FlatProfiler Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Management Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [SystemDictionary Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [CLDG Roots (ms): 2.2 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.5, Max: 2.2, Diff: 2.2, Sum: 2.2]</span><span class="line output">  [JVMTI Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [CodeCache Roots (ms): 0.0 0.1 0.3 0.0</span><span class="line output">  Min: 0.0, Avg: 0.1, Max: 0.3, Diff: 0.3, Sum: 0.4]</span><span class="line output">  [CM RefProcessor Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Wait For Strong CLD (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Weak CLD Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [SATB Filtering (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Update RS (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Processed Buffers: 0 0 0 0</span><span class="line output">  Min: 0, Avg: 0.0, Max: 0, Diff: 0, Sum: 0]</span><span class="line output">  [Scan RS (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Code Root Scanning (ms): 0.0 0.1 0.3 0.0</span><span class="line output">  Min: 0.0, Avg: 0.1, Max: 0.3, Diff: 0.3, Sum: 0.4]</span><span class="line output">  [Object Copy (ms): 2.5 3.1 3.3 3.3</span><span class="line output">  Min: 2.5, Avg: 3.1, Max: 3.3, Diff: 0.8, Sum: 12.2]</span><span class="line output">  [Termination (ms): 0.0 0.6 0.6 0.6</span><span class="line output">  Min: 0.0, Avg: 0.5, Max: 0.6, Diff: 0.6, Sum: 1.9]</span><span class="line output">  [Termination Attempts: 1 5 8 9</span><span class="line output">  Min: 1, Avg: 5.8, Max: 9, Diff: 8, Sum: 23]</span><span class="line output">  [GC Worker Other (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [GC Worker Total (ms): 4.7 4.7 4.7 4.3</span><span class="line output">  Min: 4.3, Avg: 4.6, Max: 4.7, Diff: 0.5, Sum: 18.4]</span><span class="line output">  [GC Worker End (ms): 411.1 411.1 411.1 411.2</span><span class="line output">  Min: 411.1, Avg: 411.1, Max: 411.2, Diff: 0.0]</span><span class="line output">  [Code Root Fixup: 0.1 ms]</span><span class="line output">  [Code Root Purge: 0.0 ms]</span><span class="line output">  [Clear CT: 0.1 ms]</span><span class="line output">  [Other: 2.1 ms]</span><span class="line output">  [Choose CSet: 0.0 ms]</span><span class="line output">  [Ref Proc: 0.4 ms]</span><span class="line output">  [Ref Enq: 0.0 ms]</span><span class="line output">  [Redirty Cards: 0.0 ms]</span><span class="line output">  [Parallel Redirty: 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Redirtied Cards: 965 492 0 0</span><span class="line output">  Min: 0, Avg: 364.2, Max: 965, Diff: 965, Sum: 1457]</span><span class="line output">  [Humongous Register: 0.0 ms]</span><span class="line output">  [Humongous Total: 0]</span><span class="line output">  [Humongous Candidate: 0]</span><span class="line output">  [Humongous Reclaim: 0.0 ms]</span><span class="line output">  [Humongous Reclaimed: 0]</span><span class="line output">  [Free CSet: 0.0 ms]</span><span class="line output">  [Young Free CSet: 0.0 ms]</span><span class="line output">  [Non-Young Free CSet: 0.0 ms]</span><span class="line output">  [Eden: 14.0M(14.0M)-&gt;0.0B(13.0M) Survivors: 0.0B-&gt;2048.0K Heap: 14.0M(50.0M)-&gt;5212.0K(50.0M)]</span><span class="line output"> [Times: user=0.02 sys=0.00, real=0.01 secs]</span><span class="line output">2017-09-21T14:20:49.297+0800: 0.525: [GC pause (G1 Evacuation Pause) (young), 0.0033552 secs]</span><span class="line output">  [Parallel Time: 2.6 ms, GC Workers: 4]</span><span class="line output">  [GC Worker Start (ms): 525.3 525.4 525.4 525.4</span><span class="line output">  Min: 525.3, Avg: 525.4, Max: 525.4, Diff: 0.1]</span><span class="line output">  [Ext Root Scanning (ms): 0.7 0.3 0.3 0.3</span><span class="line output">  Min: 0.3, Avg: 0.4, Max: 0.7, Diff: 0.4, Sum: 1.6]</span><span class="line output">  [Thread Roots (ms): 0.0 0.2 0.2 0.2</span><span class="line output">  Min: 0.0, Avg: 0.1, Max: 0.2, Diff: 0.2, Sum: 0.5]</span><span class="line output">  [StringTable Roots (ms): 0.0 0.4 0.4 0.2</span><span class="line output">  Min: 0.0, Avg: 0.3, Max: 0.4, Diff: 0.4, Sum: 1.0]</span><span class="line output">  [Universe Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [JNI Handles Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [ObjectSynchronizer Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [FlatProfiler Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Management Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [SystemDictionary Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [CLDG Roots (ms): 0.7 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.2, Max: 0.7, Diff: 0.7, Sum: 0.7]</span><span class="line output">  [JVMTI Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [CodeCache Roots (ms): 0.4 0.4 0.5 0.9</span><span class="line output">  Min: 0.4, Avg: 0.5, Max: 0.9, Diff: 0.5, Sum: 2.2]</span><span class="line output">  [CM RefProcessor Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Wait For Strong CLD (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Weak CLD Roots (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [SATB Filtering (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Update RS (ms): 0.2 0.1 0.1 0.2</span><span class="line output">  Min: 0.1, Avg: 0.2, Max: 0.2, Diff: 0.1, Sum: 0.6]</span><span class="line output">  [Processed Buffers: 1 2 2 1</span><span class="line output">  Min: 1, Avg: 1.5, Max: 2, Diff: 1, Sum: 6]</span><span class="line output">  [Scan RS (ms): 0.2 0.3 0.2 0.3</span><span class="line output">  Min: 0.2, Avg: 0.2, Max: 0.3, Diff: 0.1, Sum: 1.0]</span><span class="line output">  [Code Root Scanning (ms): 0.0 0.1 0.1 0.4</span><span class="line output">  Min: 0.0, Avg: 0.1, Max: 0.4, Diff: 0.4, Sum: 0.6]</span><span class="line output">  [Object Copy (ms): 1.5 1.8 1.7 1.3</span><span class="line output">  Min: 1.3, Avg: 1.6, Max: 1.8, Diff: 0.5, Sum: 6.3]</span><span class="line output">  [Termination (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Termination Attempts: 1 1 1 1</span><span class="line output">  Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]</span><span class="line output">  [GC Worker Other (ms): 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [GC Worker Total (ms): 2.6 2.5 2.5 2.5</span><span class="line output">  Min: 2.5, Avg: 2.5, Max: 2.6, Diff: 0.1, Sum: 10.1]</span><span class="line output">  [GC Worker End (ms): 527.9 527.9 527.9 527.9</span><span class="line output">  Min: 527.9, Avg: 527.9, Max: 527.9, Diff: 0.0]</span><span class="line output">  [Code Root Fixup: 0.1 ms]</span><span class="line output">  [Code Root Purge: 0.0 ms]</span><span class="line output">  [Clear CT: 0.2 ms]</span><span class="line output">  [Other: 0.4 ms]</span><span class="line output">  [Choose CSet: 0.0 ms]</span><span class="line output">  [Ref Proc: 0.3 ms]</span><span class="line output">  [Ref Enq: 0.0 ms]</span><span class="line output">  [Redirty Cards: 0.1 ms]</span><span class="line output">  [Parallel Redirty: 0.0 0.0 0.0 0.0</span><span class="line output">  Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span><span class="line output">  [Redirtied Cards: 1919 1636 571 0</span><span class="line output">  Min: 0, Avg: 1031.5, Max: 1919, Diff: 1919, Sum: 4126]</span><span class="line output">  [Humongous Register: 0.0 ms]</span><span class="line output">  [Humongous Total: 0]</span><span class="line output">  [Humongous Candidate: 0]</span><span class="line output">  [Humongous Reclaim: 0.0 ms]</span><span class="line output">  [Humongous Reclaimed: 0]</span><span class="line output">  [Free CSet: 0.0 ms]</span><span class="line output">  [Young Free CSet: 0.0 ms]</span><span class="line output">  [Non-Young Free CSet: 0.0 ms]</span><span class="line output">  [Eden: 12.0M(6144.0K)-&gt;0.0B(25.0M) Survivors: 2048.0K-&gt;1024.0K Heap: 17.1M(50.0M)-&gt;8532.0K(50.0M)]</span><span class="line output"> [Times: user=0.01 sys=0.00, real=0.01 secs]</span><span class="line output">2017-09-21T14:20:50.101+0800: 1.329: [Full GC (System.gc()) 15M-&gt;8266K(50M), 0.0379003 secs]</span><span class="line output">  [Eden: 7168.0K(25.0M)-&gt;0.0B(25.0M) Survivors: 1024.0K-&gt;0.0B Heap: 15.5M(50.0M)-&gt;8266.1K(50.0M)], [Metaspace: 16513K-&gt;16513K(1064960K)]</span><span class="line output"> [Times: user=0.04 sys=0.00, real=0.04 secs]</span><span class="line output">2017-09-21T14:20:50.836+0800: 2.063: [Full GC (System.gc()) 9216K-&gt;8071K(50M), 0.0376095 secs]</span><span class="line output">  [Eden: 1024.0K(25.0M)-&gt;0.0B(25.0M) Survivors: 0.0B-&gt;0.0B Heap: 9216.7K(50.0M)-&gt;8072.0K(50.0M)], [Metaspace: 16554K-&gt;16554K(1064960K)]</span><span class="line output"> [Times: user=0.04 sys=0.00, real=0.04 secs]</span><span class="line output">2017-09-21T14:20:51.509+0800: 2.737: [Full GC (System.gc()) 9022K-&gt;8074K(50M), 0.0371841 secs]</span><span class="line output">  [Eden: 1024.0K(25.0M)-&gt;0.0B(25.0M) Survivors: 0.0B-&gt;0.0B Heap: 9022.6K(50.0M)-&gt;8074.5K(50.0M)], [Metaspace: 16581K-&gt;16581K(1064960K)]</span><span class="line output"> [Times: user=0.04 sys=0.00, real=0.04 secs]</span><span class="line output">2017-09-21T14:20:53.787+0800: 5.015: [Full GC (System.gc()) 9900K-&gt;8080K(50M), 0.0213002 secs]</span><span class="line output">  [Eden: 2048.0K(25.0M)-&gt;0.0B(25.0M) Survivors: 0.0B-&gt;0.0B Heap: 9900.6K(50.0M)-&gt;8080.1K(50.0M)], [Metaspace: 16636K-&gt;16636K(1064960K)]</span><span class="line output"> [Times: user=0.03 sys=0.00, real=0.02 secs]</span><span class="line output">2017-09-21T14:20:54.443+0800: 5.671: [Full GC (System.gc()) 9659K-&gt;8721K(50M), 0.0210222 secs]</span><span class="line output">  [Eden: 1024.0K(25.0M)-&gt;0.0B(24.0M) Survivors: 0.0B-&gt;0.0B Heap: 9659.7K(50.0M)-&gt;8721.5K(50.0M)], [Metaspace: 16666K-&gt;16666K(1064960K)]</span><span class="line output"> [Times: user=0.03 sys=0.00, real=0.02 secs]</span><span class="line output">2017-09-21T14:20:59.433+0800: 10.661: [Full GC (System.gc()) 10131K-&gt;8727K(50M), 0.0463835 secs]</span><span class="line output">  [Eden: 2048.0K(24.0M)-&gt;0.0B(24.0M) Survivors: 0.0B-&gt;0.0B Heap: 10131.5K(50.0M)-&gt;8727.2K(50.0M)], [Metaspace: 16790K-&gt;16790K(1064960K)]</span><span class="line output"> [Times: user=0.06 sys=0.00, real=0.05 secs]</span><span class="line output">2017-09-21T14:21:00.140+0800: 11.368: [Full GC (System.gc()) 10M-&gt;8749K(50M), 0.0198179 secs]</span><span class="line output">  [Eden: 2048.0K(24.0M)-&gt;0.0B(24.0M) Survivors: 0.0B-&gt;0.0B Heap: 10.4M(50.0M)-&gt;8749.4K(50.0M)], [Metaspace: 16951K-&gt;16951K(1064960K)]</span><span class="line output"> [Times: user=0.03 sys=0.00, real=0.02 secs]</span><span class="line output">2017-09-21T14:21:00.697+0800: 11.925: [Full GC (System.gc()) 10M-&gt;8917K(50M), 0.0282837 secs]</span><span class="line output">  [Eden: 2048.0K(24.0M)-&gt;0.0B(24.0M) Survivors: 0.0B-&gt;0.0B Heap: 10.5M(50.0M)-&gt;8917.0K(50.0M)], [Metaspace: 17346K-&gt;17346K(1064960K)]</span><span class="line output"> [Times: user=0.03 sys=0.00, real=0.03 secs]</span><span class="line output">2017-09-21T14:21:01.348+0800: 12.575: [Full GC (System.gc()) 11M-&gt;8947K(50M), 0.0319808 secs]</span><span class="line output">  [Eden: 3072.0K(24.0M)-&gt;0.0B(24.0M) Survivors: 0.0B-&gt;0.0B Heap: 11.5M(50.0M)-&gt;8947.9K(50.0M)], [Metaspace: 17549K-&gt;17549K(1064960K)]</span><span class="line output"> [Times: user=0.04 sys=0.00, real=0.04 secs]</span><span class="line output">Heap</span><span class="line output"> garbage-first heap total 51200K, used 13043K [0x00000000fce00000, 0x00000000fcf00190, 0x0000000100000000]</span><span class="line output">  region size 1024K, 5 young (5120K), 0 survivors (0K)</span><span class="line output"> Metaspace used 17791K, capacity 18052K, committed 18176K, reserved 1064960K</span><span class="line output">  class space used 2405K, capacity 2479K, committed 2560K, reserved 1048576K</span></pre></td></tr></table></figure>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="http://www.oracle.com/technetwork/tutorials/tutorials-1876574.html" target="_blank" rel="noopener">getting started with the G1 garbage collector</a></li>
<li><a href="http://blog.csdn.net/renfufei/article/details/41897113" target="_blank" rel="noopener">G1垃圾收集器入门</a></li>
<li><a href="https://blogs.oracle.com/poonam/understanding-g1-gc-logs" target="_blank" rel="noopener">Understanding G1 GC Logs</a></li>
<li><a href="/blog/java/2016/10/13/java-jvm-and-gc.html">java jvm and gc</a></li>
</ol>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/linux/2017/09/20/user-session-reset-in-tomcat-webapp.html" rel="next" title="tomcat应用中用户session被重置的问题">
                <i class="fa fa-chevron-left"></i>
                tomcat应用中用户session被重置的问题
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/java/2017/09/23/GoF-relationships-of-23-design-patterns.html" rel="prev" title="gof - relationships of 23 design patterns">
                <i class="fa fa-chevron-right"></i>
                gof - relationships of 23 design patterns
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/blog/images/avatar.jpg" alt="yuweijun">
          <p class="site-author-name" itemprop="name">yuweijun</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">492</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/blog/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yuweijun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/yuweijun" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java-Technology-and-the-JVM"><span class="nav-number">2.</span> <span class="nav-text">Java Technology and the JVM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Overview"><span class="nav-number">2.1.</span> <span class="nav-text">Java Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Runtime-Edition"><span class="nav-number">2.2.</span> <span class="nav-text">Java Runtime Edition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Programming-Language"><span class="nav-number">2.3.</span> <span class="nav-text">Java Programming Language</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Virtual-Machine"><span class="nav-number">2.4.</span> <span class="nav-text">Java Virtual Machine</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exploring-the-JVM-Architecture"><span class="nav-number">3.</span> <span class="nav-text">Exploring the JVM Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Hotspot-Architecture"><span class="nav-number">3.1.</span> <span class="nav-text">Hotspot Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Hotspot-Components"><span class="nav-number">3.2.</span> <span class="nav-text">Key Hotspot Components</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-Basics"><span class="nav-number">4.</span> <span class="nav-text">Performance Basics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Responsiveness"><span class="nav-number">4.1.</span> <span class="nav-text">Responsiveness</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Throughput"><span class="nav-number">4.2.</span> <span class="nav-text">Throughput</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-G1-Garbage-Collector"><span class="nav-number">5.</span> <span class="nav-text">The G1 Garbage Collector</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Operational-Overview"><span class="nav-number">5.1.</span> <span class="nav-text">G1 Operational Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Footprint"><span class="nav-number">5.2.</span> <span class="nav-text">G1 Footprint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Recommended-Use-Cases-for-G1"><span class="nav-number">5.3.</span> <span class="nav-text">Recommended Use Cases for G1</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reviewing-GC-with-the-CMS"><span class="nav-number">6.</span> <span class="nav-text">Reviewing GC with the CMS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reviewing-Generational-GC-and-CMS"><span class="nav-number">6.1.</span> <span class="nav-text">Reviewing Generational GC and CMS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CMS-Collection-Phases"><span class="nav-number">6.2.</span> <span class="nav-text">CMS Collection Phases</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reviewing-Garbage-Collection-Steps"><span class="nav-number">7.</span> <span class="nav-text">Reviewing Garbage Collection Steps</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Heap-Structure-for-CMS-Collector"><span class="nav-number">7.1.</span> <span class="nav-text">Heap Structure for CMS Collector</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-Young-GC-works-in-CMS"><span class="nav-number">7.2.</span> <span class="nav-text">How Young GC works in CMS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Young-Generation-Collection"><span class="nav-number">7.3.</span> <span class="nav-text">Young Generation Collection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#After-Young-GC"><span class="nav-number">7.4.</span> <span class="nav-text">After Young GC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Old-Generation-Collection-with-CMS"><span class="nav-number">7.5.</span> <span class="nav-text">Old Generation Collection with CMS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Old-Generation-Collection-Concurrent-Sweep"><span class="nav-number">7.6.</span> <span class="nav-text">Old Generation Collection - Concurrent Sweep</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Old-Generation-Collection-After-Sweeping"><span class="nav-number">7.7.</span> <span class="nav-text">Old Generation Collection - After Sweeping</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-G1-Garbage-Collector-Step-by-Step"><span class="nav-number">8.</span> <span class="nav-text">The G1 Garbage Collector Step by Step</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Heap-Structure"><span class="nav-number">8.1.</span> <span class="nav-text">G1 Heap Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Heap-Allocation"><span class="nav-number">8.2.</span> <span class="nav-text">G1 Heap Allocation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Young-Generation-in-G1"><span class="nav-number">8.3.</span> <span class="nav-text">Young Generation in G1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-Young-GC-in-G1"><span class="nav-number">8.4.</span> <span class="nav-text">A Young GC in G1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#End-of-a-Young-GC-with-G1"><span class="nav-number">8.5.</span> <span class="nav-text">End of a Young GC with G1</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Old-Generation-Collection-with-G1"><span class="nav-number">9.</span> <span class="nav-text">Old Generation Collection with G1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Collection-Phases-Concurrent-Marking-Cycle-Phases"><span class="nav-number">9.1.</span> <span class="nav-text">G1 Collection Phases - Concurrent Marking Cycle Phases</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Old-Generation-Collection-Step-by-Step"><span class="nav-number">9.2.</span> <span class="nav-text">G1 Old Generation Collection Step by Step</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Initial-Marking-Phase"><span class="nav-number">9.3.</span> <span class="nav-text">Initial Marking Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Concurrent-Marking-Phase"><span class="nav-number">9.4.</span> <span class="nav-text">Concurrent Marking Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remark-Phase"><span class="nav-number">9.5.</span> <span class="nav-text">Remark Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Copying-Cleanup-Phase"><span class="nav-number">9.6.</span> <span class="nav-text">Copying/Cleanup Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#After-Copying-Cleanup-Phase"><span class="nav-number">9.7.</span> <span class="nav-text">After Copying/Cleanup Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-of-Old-Generation-GC"><span class="nav-number">9.8.</span> <span class="nav-text">Summary of Old Generation GC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Command-Line-Options-and-Best-Practices"><span class="nav-number">10.</span> <span class="nav-text">Command Line Options and Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Basic-Command-Line"><span class="nav-number">10.1.</span> <span class="nav-text">Basic Command Line</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Command-Line-Switches"><span class="nav-number">10.2.</span> <span class="nav-text">Key Command Line Switches</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practices"><span class="nav-number">10.3.</span> <span class="nav-text">Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Do-not-Set-Young-Generation-Size"><span class="nav-number">10.3.1.</span> <span class="nav-text">Do not Set Young Generation Size</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Response-Time-Metrics"><span class="nav-number">10.3.2.</span> <span class="nav-text">Response Time Metrics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#What-is-an-Evacuation-Failure"><span class="nav-number">10.3.3.</span> <span class="nav-text">What is an Evacuation Failure?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#How-to-avoid-Evacuation-Failure"><span class="nav-number">10.3.4.</span> <span class="nav-text">How to avoid Evacuation Failure</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Complete-List-of-G1-GC-Switches"><span class="nav-number">10.4.</span> <span class="nav-text">Complete List of G1 GC Switches</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logging-GC-with-G1"><span class="nav-number">11.</span> <span class="nav-text">Logging GC with G1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-the-Log-Detail"><span class="nav-number">11.1.</span> <span class="nav-text">Setting the Log Detail</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sample-Output"><span class="nav-number">11.1.1.</span> <span class="nav-text">Sample Output</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sample-Output-1"><span class="nav-number">11.1.2.</span> <span class="nav-text">Sample Output</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Determining-Time"><span class="nav-number">11.2.</span> <span class="nav-text">Determining Time</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sample-Output-2"><span class="nav-number">11.2.1.</span> <span class="nav-text">Sample Output</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Understanding-G1-Log"><span class="nav-number">11.3.</span> <span class="nav-text">Understanding G1 Log</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-Logging-Terms-Index"><span class="nav-number">11.4.</span> <span class="nav-text">G1 Logging Terms Index</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#External-Root-Scanning"><span class="nav-number">11.4.1.</span> <span class="nav-text">External Root Scanning</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Update-Remembered-Set"><span class="nav-number">11.4.2.</span> <span class="nav-text">Update Remembered Set</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Scanning-Remembered-Sets"><span class="nav-number">11.4.3.</span> <span class="nav-text">Scanning Remembered Sets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-Copy"><span class="nav-number">11.4.4.</span> <span class="nav-text">Object Copy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Termination-Time"><span class="nav-number">11.4.5.</span> <span class="nav-text">Termination Time</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GC-Worker-End"><span class="nav-number">11.4.6.</span> <span class="nav-text">GC Worker End</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GC-Worker-Other"><span class="nav-number">11.4.7.</span> <span class="nav-text">GC Worker Other</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Clear-CT"><span class="nav-number">11.4.8.</span> <span class="nav-text">Clear CT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Other"><span class="nav-number">11.4.9.</span> <span class="nav-text">Other</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSet"><span class="nav-number">11.4.10.</span> <span class="nav-text">CSet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ref-Proc"><span class="nav-number">11.4.11.</span> <span class="nav-text">Ref Proc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ref-Enq"><span class="nav-number">11.4.12.</span> <span class="nav-text">Ref Enq</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Free-CSet"><span class="nav-number">11.4.13.</span> <span class="nav-text">Free CSet</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">12.</span> <span class="nav-text">Summary</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Resources"><span class="nav-number">12.1.</span> <span class="nav-text">Resources</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Credits"><span class="nav-number">12.2.</span> <span class="nav-text">Credits</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-GC-log-of-G1-using-Java2Demo-jar"><span class="nav-number">13.</span> <span class="nav-text">Example GC log of G1 using Java2Demo.jar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">14.</span> <span class="nav-text">References</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-github"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuweijun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist.KISS
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
