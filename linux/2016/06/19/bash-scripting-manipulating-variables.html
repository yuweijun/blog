<!doctype html>




<html class="theme-next mist">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />


















  

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />






  <link rel="alternate" href="/blog/atom.xml" title="一" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=5.0.1" />






<meta name="description" content="经常在linux命令行或者是bash脚本里定义变量和操作字符串，其中语法比较多，转LDP文档做为手册和示例，便于查询。 Manipulating and/or expanding variables${parameter}Same as $parameter, i.e., value of the variable parameter. In certain contexts, only the">
<meta property="og:type" content="article">
<meta property="og:title" content="advanced bash scripting guide: manipulating variables">
<meta property="og:url" content="https://www.4e00.com/linux/2016/06/19/bash-scripting-manipulating-variables.html">
<meta property="og:site_name" content="一">
<meta property="og:description" content="经常在linux命令行或者是bash脚本里定义变量和操作字符串，其中语法比较多，转LDP文档做为手册和示例，便于查询。 Manipulating and/or expanding variables${parameter}Same as $parameter, i.e., value of the variable parameter. In certain contexts, only the">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2017-07-31T01:27:48.149Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="advanced bash scripting guide: manipulating variables">
<meta name="twitter:description" content="经常在linux命令行或者是bash脚本里定义变量和操作字符串，其中语法比较多，转LDP文档做为手册和示例，便于查询。 Manipulating and/or expanding variables${parameter}Same as $parameter, i.e., value of the variable parameter. In certain contexts, only the">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: false,
    motion: false,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://www.4e00.com/blog/linux/2016/06/19/bash-scripting-manipulating-variables.html"/>

  <title> advanced bash scripting guide: manipulating variables | 一 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/"  class="brand" rel="start">
      <span class="site-title">一</span>
    </a>
  </div>
  <p class="site-subtitle">{"type":"编程笔记"}</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      <li class="menu-item menu-item-search">
        <a href="https://www.google.com.hk/search?q=site%3Awww.4e00.com%2Fblog%2F" class="popup-trigger">
          <i class="menu-item-icon fa fa-search fa-fw"></i>Search
        </a>
      </li>
    </ul>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                advanced bash scripting guide: manipulating variables
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-06-19T17:43:54+08:00" content="2016-06-19">
              2016-06-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/blog/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>经常在linux命令行或者是bash脚本里定义变量和操作字符串，其中语法比较多，转<a href="http://www.tldp.org/LDP/abs/html/parameter-substitution.html" target="_blank" rel="external">LDP文档</a>做为手册和示例，便于查询。</p>
<h2 id="Manipulating-and-or-expanding-variables"><a href="#Manipulating-and-or-expanding-variables" class="headerlink" title="Manipulating and/or expanding variables"></a>Manipulating and/or expanding variables</h2><h3 id="parameter"><a href="#parameter" class="headerlink" title="${parameter}"></a>${parameter}</h3><p>Same as <code>$parameter</code>, i.e., value of the variable parameter. In certain contexts, only the less ambiguous <code>${parameter}</code> form works.</p>
<p>May be used for concatenating variables with strings.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">your_id=<span class="variable">$&#123;USER&#125;</span>-on-<span class="variable">$&#123;HOSTNAME&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$your_id</span>"</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Old \$PATH = <span class="variable">$PATH</span>"</span></div><div class="line">PATH=<span class="variable">$&#123;PATH&#125;</span>:/opt/bin  <span class="comment"># Add /opt/bin to $PATH for duration of script.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"New \$PATH = <span class="variable">$PATH</span>"</span></div></pre></td></tr></table></figure>
<h3 id="parameter-default-parameter-default"><a href="#parameter-default-parameter-default" class="headerlink" title="${parameter-default}, ${parameter:-default}"></a>${parameter-default}, ${parameter:-default}</h3><p>If parameter not set, use default.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">var1=1</div><div class="line">var2=2</div><div class="line"><span class="comment"># var3 is unset.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var1-$var2&#125;</span>   <span class="comment"># 1</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var3-$var2&#125;</span>   <span class="comment"># 2</span></div><div class="line"><span class="comment">#           ^          Note the $ prefix.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;username-`whoami`&#125;</span></div><div class="line"><span class="comment"># Echoes the result of `whoami`, if variable $username is still unset.</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p><code>${parameter-default}</code> and <code>${parameter:-default}</code> are almost equivalent. The extra <code>:</code> makes a difference only when <code>parameter</code> has been declared, but is null.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># param-sub.sh</span></div><div class="line"></div><div class="line"><span class="comment">#  Whether a variable has been declared</span></div><div class="line"><span class="comment">#+ affects triggering of the default option</span></div><div class="line"><span class="comment">#+ even if the variable is null.</span></div><div class="line"></div><div class="line">username0=</div><div class="line"><span class="built_in">echo</span> <span class="string">"username0 has been declared, but is set to null."</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"username0 = <span class="variable">$&#123;username0-`whoami`&#125;</span>"</span></div><div class="line"><span class="comment"># Will not echo.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> username1 has not been declared.</div><div class="line"><span class="built_in">echo</span> <span class="string">"username1 = <span class="variable">$&#123;username1-`whoami`&#125;</span>"</span></div><div class="line"><span class="comment"># Will echo.</span></div><div class="line"></div><div class="line">username2=</div><div class="line"><span class="built_in">echo</span> <span class="string">"username2 has been declared, but is set to null."</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"username2 = <span class="variable">$&#123;username2:-`whoami`&#125;</span>"</span></div><div class="line"><span class="comment">#                            ^</span></div><div class="line"><span class="comment"># Will echo because of :- rather than just - in condition test.</span></div><div class="line"><span class="comment"># Compare to first instance, above.</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line"><span class="comment"># Once again:</span></div><div class="line"></div><div class="line">variable=</div><div class="line"><span class="comment"># variable has been declared, but is set to null.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;variable-0&#125;</span>"</span>    <span class="comment"># (no output)</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;variable:-1&#125;</span>"</span>   <span class="comment"># 1</span></div><div class="line"><span class="comment">#               ^</span></div><div class="line"></div><div class="line"><span class="built_in">unset</span> variable</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;variable-2&#125;</span>"</span>    <span class="comment"># 2</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;variable:-3&#125;</span>"</span>   <span class="comment"># 3</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<p>The <code>default parameter</code> construct finds use in providing &quot;missing&quot; command-line arguments in scripts.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">DEFAULT_FILENAME=generic.data</div><div class="line">filename=<span class="variable">$&#123;1:-$DEFAULT_FILENAME&#125;</span></div><div class="line"><span class="comment">#  If not otherwise specified, the following command block operates</span></div><div class="line"><span class="comment">#+ on the file "generic.data".</span></div><div class="line"><span class="comment">#  Begin-Command-Block</span></div><div class="line"><span class="comment">#  ...</span></div><div class="line"><span class="comment">#  ...</span></div><div class="line"><span class="comment">#  ...</span></div><div class="line"><span class="comment">#  End-Command-Block</span></div><div class="line"></div><div class="line"><span class="comment">#  From "hanoi2.bash" example:</span></div><div class="line">DISKS=<span class="variable">$&#123;1:-E_NOPARAM&#125;</span>   <span class="comment"># Must specify how many disks.</span></div><div class="line"><span class="comment">#  Set $DISKS to $1 command-line-parameter,</span></div><div class="line"><span class="comment">#+ or to $E_NOPARAM if that is unset.</span></div></pre></td></tr></table></figure>
<p>See also Example 3-4, Example 31-2, and Example A-6.</p>
<p>Compare this method with using an and list to supply a default command-line argument.</p>
<h3 id="parameter-default-parameter-default-1"><a href="#parameter-default-parameter-default-1" class="headerlink" title="${parameter=default}, ${parameter:=default}"></a>${parameter=default}, ${parameter:=default}</h3><p>If <code>parameter</code> not set, set it to <code>default</code>.</p>
<p>Both forms nearly equivalent. The <code>:</code> makes a difference only when <code>$parameter</code> has been declared and is null, [1] as above.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var=abc&#125;</span>   <span class="comment"># abc</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var=xyz&#125;</span>   <span class="comment"># abc</span></div><div class="line"><span class="comment"># $var had already been set to abc, so it did not change.</span></div></pre></td></tr></table></figure>
<h3 id="parameter-alt-value-parameter-alt-value"><a href="#parameter-alt-value-parameter-alt-value" class="headerlink" title="${parameter+alt_value}, ${parameter:+alt_value}"></a>${parameter+alt_value}, ${parameter:+alt_value}</h3><p>If <code>parameter</code> set, use <code>alt_value</code>, else use null string.</p>
<p>Both forms nearly equivalent. The <code>:</code> makes a difference only when <code>parameter</code> has been declared and is null, see below.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"###### \$&#123;parameter+alt_value&#125; ########"</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line">a=<span class="variable">$&#123;param1+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a =</span></div><div class="line"></div><div class="line">param2=</div><div class="line">a=<span class="variable">$&#123;param2+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a = xyz</span></div><div class="line"></div><div class="line">param3=123</div><div class="line">a=<span class="variable">$&#123;param3+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a = xyz</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"###### \$&#123;parameter:+alt_value&#125; ########"</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line">a=<span class="variable">$&#123;param4:+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a =</span></div><div class="line"></div><div class="line">param5=</div><div class="line">a=<span class="variable">$&#123;param5:+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a =</span></div><div class="line"><span class="comment"># Different result from   a=$&#123;param5+xyz&#125;</span></div><div class="line"></div><div class="line">param6=123</div><div class="line">a=<span class="variable">$&#123;param6:+xyz&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment"># a = xyz</span></div></pre></td></tr></table></figure>
<h3 id="parameter-err-msg-parameter-err-msg"><a href="#parameter-err-msg-parameter-err-msg" class="headerlink" title="${parameter?err_msg}, ${parameter:?err_msg}"></a>${parameter?err_msg}, ${parameter:?err_msg}</h3><p>If parameter set, use it, else print <code>err_msg</code> and abort the script with <a href="http://www.tldp.org/LDP/abs/html/exit-status.html#EXITSTATUSREF" target="_blank" rel="external">an exit</a> status of 1.</p>
<p>Both forms nearly equivalent. The <code>:</code> makes a difference only when <code>parameter</code> has been declared and is null, as above.</p>
<h2 id="Example-10-7-Using-parameter-substitution-and-error-messages"><a href="#Example-10-7-Using-parameter-substitution-and-error-messages" class="headerlink" title="Example 10-7. Using parameter substitution and error messages"></a>Example 10-7. Using parameter substitution and error messages</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="comment">#  Check some of the system's environmental variables.</span></div><div class="line"><span class="comment">#  This is good preventative maintenance.</span></div><div class="line"><span class="comment">#  If, for example, $USER, the name of the person at the console, is not set,</span></div><div class="line"><span class="comment">#+ the machine will not recognize you.</span></div><div class="line"></div><div class="line">: <span class="variable">$&#123;HOSTNAME?&#125;</span> <span class="variable">$&#123;USER?&#125;</span> <span class="variable">$&#123;HOME?&#125;</span> <span class="variable">$&#123;MAIL?&#125;</span></div><div class="line">  <span class="built_in">echo</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"Name of the machine is <span class="variable">$HOSTNAME</span>."</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"You are <span class="variable">$USER</span>."</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"Your home directory is <span class="variable">$HOME</span>."</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"Your mail INBOX is located in <span class="variable">$MAIL</span>."</span></div><div class="line">  <span class="built_in">echo</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"If you are reading this message,"</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"critical environmental variables have been set."</span></div><div class="line">  <span class="built_in">echo</span></div><div class="line">  <span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="comment"># ------------------------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">#  The $&#123;variablename?&#125; construction can also check</span></div><div class="line"><span class="comment">#+ for variables set within the script.</span></div><div class="line"></div><div class="line">ThisVariable=Value-of-ThisVariable</div><div class="line"><span class="comment">#  Note, by the way, that string variables may be set</span></div><div class="line"><span class="comment">#+ to characters disallowed in their names.</span></div><div class="line">: <span class="variable">$&#123;ThisVariable?&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Value of ThisVariable is <span class="variable">$ThisVariable</span>"</span>.</div><div class="line"></div><div class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span></div><div class="line"></div><div class="line"></div><div class="line">: <span class="variable">$&#123;ZZXy23AB?"ZZXy23AB has not been set."&#125;</span></div><div class="line"><span class="comment">#  Since ZZXy23AB has not been set,</span></div><div class="line"><span class="comment">#+ then the script terminates with an error message.</span></div><div class="line"></div><div class="line"><span class="comment"># You can specify the error message.</span></div><div class="line"><span class="comment"># : $&#123;variablename?"ERROR MESSAGE"&#125;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Same result with:   dummy_variable=$&#123;ZZXy23AB?&#125;</span></div><div class="line"><span class="comment">#                     dummy_variable=$&#123;ZZXy23AB?"ZXy23AB has not been set."&#125;</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#                     echo $&#123;ZZXy23AB?&#125; &gt;/dev/null</span></div><div class="line"></div><div class="line"><span class="comment">#  Compare these methods of checking whether a variable has been set</span></div><div class="line"><span class="comment">#+ with "set -u" . . .</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"You will not see this message, because script already terminated."</span></div><div class="line"></div><div class="line">HERE=0</div><div class="line"><span class="built_in">exit</span> <span class="variable">$HERE</span>   <span class="comment"># Will NOT exit here.</span></div><div class="line"></div><div class="line"><span class="comment"># In fact, this script will return an exit status (echo $?) of 1.</span></div></pre></td></tr></table></figure>
<h2 id="Example-10-8-Parameter-substitution-and-quot-usage-quot-messages"><a href="#Example-10-8-Parameter-substitution-and-quot-usage-quot-messages" class="headerlink" title="Example 10-8. Parameter substitution and &quot;usage&quot; messages"></a>Example 10-8. Parameter substitution and &quot;usage&quot; messages</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># usage-message.sh</span></div><div class="line"></div><div class="line">: <span class="variable">$&#123;1?"Usage: $0 ARGUMENT"&#125;</span></div><div class="line"><span class="comment">#  Script exits here if command-line parameter absent,</span></div><div class="line"><span class="comment">#+ with following error message.</span></div><div class="line"><span class="comment">#    usage-message.sh: 1: Usage: usage-message.sh ARGUMENT</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"These two lines echo only if command-line parameter given."</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"command-line parameter = \"<span class="variable">$1</span>\""</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0  <span class="comment"># Will exit here only if command-line parameter present.</span></div><div class="line"></div><div class="line"><span class="comment"># Check the exit status, both with and without command-line parameter.</span></div><div class="line"><span class="comment"># If command-line parameter present, then "$?" is 0.</span></div><div class="line"><span class="comment"># If not, then "$?" is 1.</span></div></pre></td></tr></table></figure>
<p><code>Parameter substitution and/or expansion.</code> The following expressions are the complement to the <code>match</code> in <code>expr</code> string operations (see Example 16-9). These particular ones are used mostly in parsing file path names.</p>
<h2 id="Variable-length-Substring-removal"><a href="#Variable-length-Substring-removal" class="headerlink" title="Variable length / Substring removal"></a>Variable length / Substring removal</h2><h3 id="num-var"><a href="#num-var" class="headerlink" title="${&num;var}"></a>${&num;var}</h3><p><code>String length</code> (number of characters in <code>$var</code>). For an array, ${&num;array} is the length of the first element in the array.</p>
<h3 id="Note-1"><a href="#Note-1" class="headerlink" title="Note"></a>Note</h3><p>Exceptions:</p>
<p>${&num;*} and ${&num;@} give the <code>number of positional parameters</code>.</p>
<p>For an array, ${&num;array[*]} and ${&num;array[@]} give the number of elements in the array.</p>
<h2 id="Example-10-9-Length-of-a-variable"><a href="#Example-10-9-Length-of-a-variable" class="headerlink" title="Example 10-9. Length of a variable"></a>Example 10-9. Length of a variable</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># length.sh</span></div><div class="line"></div><div class="line">E_NO_ARGS=65</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ]  <span class="comment"># Must have command-line args to demo script.</span></div><div class="line"><span class="keyword">then</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"Please invoke this script with one or more command-line arguments."</span></div><div class="line">  <span class="built_in">exit</span> <span class="variable">$E_NO_ARGS</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">var01=abcdEFGH28ij</div><div class="line"><span class="built_in">echo</span> <span class="string">"var01 = <span class="variable">$&#123;var01&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Length of var01 = <span class="variable">$&#123;&amp;num;var01&#125;</span>"</span></div><div class="line"><span class="comment"># Now, let's try embedding a space.</span></div><div class="line">var02=<span class="string">"abcd EFGH28ij"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var02 = <span class="variable">$&#123;var02&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Length of var02 = <span class="variable">$&#123;&amp;num;var02&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"Number of command-line arguments passed to script = <span class="variable">$&#123;&amp;num;@&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Number of command-line arguments passed to script = <span class="variable">$&#123;&amp;num;*&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h3 id="var-Pattern-var-Pattern"><a href="#var-Pattern-var-Pattern" class="headerlink" title="${var#Pattern}, ${var##Pattern}"></a>${var#Pattern}, ${var##Pattern}</h3><p><code>${var#Pattern}</code> Remove from <code>$var</code> the <code>shortest</code> part of <code>$Pattern</code> that matches the front end of <code>$var</code>.</p>
<p><code>${var##Pattern}</code> Remove from <code>$var</code> the <code>longest</code> part of <code>$Pattern</code> that matches the front end of <code>$var</code>.</p>
<p>A usage illustration from Example A-7:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="comment"># Function from "days-between.sh" example.</span></div><div class="line"><span class="comment"># Strips leading zero(s) from argument passed.</span></div><div class="line"></div><div class="line">strip_leading_zero () <span class="comment">#  Strip possible leading zero(s)</span></div><div class="line">&#123;                     <span class="comment">#+ from argument passed.</span></div><div class="line">  <span class="built_in">return</span>=<span class="variable">$&#123;1#0&#125;</span>       <span class="comment">#  The "1" refers to "$1" -- passed arg.</span></div><div class="line">&#125;                     <span class="comment">#  The "0" is what to remove from "$1" -- strips zeros.</span></div></pre></td></tr></table></figure>
<p>Manfred Schwarb&#39;s more elaborate variation of the above:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">strip_leading_zero2 () <span class="comment"># Strip possible leading zero(s), since otherwise</span></div><div class="line">&#123;                      <span class="comment"># Bash will interpret such numbers as octal values.</span></div><div class="line">  <span class="built_in">shopt</span> -s extglob     <span class="comment"># Turn on extended globbing.</span></div><div class="line">  <span class="built_in">local</span> val=<span class="variable">$&#123;1##+(0)&#125;</span> <span class="comment"># Use local variable, longest matching series of 0's.</span></div><div class="line">  <span class="built_in">shopt</span> -u extglob     <span class="comment"># Turn off extended globbing.</span></div><div class="line">  _strip_leading_zero2=<span class="variable">$&#123;val:-0&#125;</span></div><div class="line">                       <span class="comment"># If input was 0, return 0 instead of "".</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Another usage illustration:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">echo</span> `basename <span class="variable">$PWD</span>`        <span class="comment"># Basename of current working directory.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;PWD##*/&#125;</span>"</span>           <span class="comment"># Basename of current working directory.</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"><span class="built_in">echo</span> `basename <span class="variable">$0</span>`          <span class="comment"># Name of script.</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$0</span>                     <span class="comment"># Name of script.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;0##*/&#125;</span>"</span>             <span class="comment"># Name of script.</span></div><div class="line"><span class="built_in">echo</span></div><div class="line">filename=test.data</div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;filename##*.&#125;</span>"</span>      <span class="comment"># data</span></div><div class="line">                            <span class="comment"># Extension of filename.</span></div></pre></td></tr></table></figure>
<h3 id="var-Pattern-var-Pattern-1"><a href="#var-Pattern-var-Pattern-1" class="headerlink" title="${var%Pattern}, ${var%%Pattern}"></a>${var%Pattern}, ${var%%Pattern}</h3><p><code>${var%Pattern}</code> Remove from <code>$var</code> the <code>shortest</code> part of <code>$Pattern</code> that matches the back end of <code>$var</code>.</p>
<p><code>${var%%Pattern}</code> Remove from <code>$var</code> the <code>longest</code> part of <code>$Pattern</code> that matches the back end of <code>$var</code>.</p>
<p>Version 2 of Bash added additional options.</p>
<h2 id="Example-10-10-Pattern-matching-in-parameter-substitution"><a href="#Example-10-10-Pattern-matching-in-parameter-substitution" class="headerlink" title="Example 10-10. Pattern matching in parameter substitution"></a>Example 10-10. Pattern matching in parameter substitution</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># patt-matching.sh</span></div><div class="line"></div><div class="line"><span class="comment"># Pattern matching  using the # ## % %% parameter substitution operators.</span></div><div class="line"></div><div class="line">var1=abcd12345abc6789</div><div class="line">pattern1=a*c  <span class="comment"># * (wild card) matches everything between a - c.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 = <span class="variable">$var1</span>"</span>           <span class="comment"># abcd12345abc6789</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 = <span class="variable">$&#123;var1&#125;</span>"</span>         <span class="comment"># abcd12345abc6789</span></div><div class="line">                              <span class="comment"># (alternate form)</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Number of characters in <span class="variable">$&#123;var1&#125;</span> = <span class="variable">$&#123;&amp;num;var1&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"pattern1 = <span class="variable">$pattern1</span>"</span>   <span class="comment"># a*c  (everything between 'a' and 'c')</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"--------------"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$&#123;var1#$pattern1&#125;  ='</span> <span class="string">"<span class="variable">$&#123;var1#$pattern1&#125;</span>"</span>    <span class="comment">#         d12345abc6789</span></div><div class="line"><span class="comment"># Shortest possible match, strips out first 3 characters  abcd12345abc6789</span></div><div class="line"><span class="comment">#                                     ^^^^^               |-|</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$&#123;var1##$pattern1&#125; ='</span> <span class="string">"<span class="variable">$&#123;var1##$pattern1&#125;</span>"</span>   <span class="comment">#                  6789</span></div><div class="line"><span class="comment"># Longest possible match, strips out first 12 characters  abcd12345abc6789</span></div><div class="line"><span class="comment">#                                    ^^^^^                |----------|</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span>; <span class="built_in">echo</span></div><div class="line"></div><div class="line">pattern2=b*9            <span class="comment"># everything between 'b' and '9'</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 = <span class="variable">$var1</span>"</span>     <span class="comment"># Still  abcd12345abc6789</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"pattern2 = <span class="variable">$pattern2</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"--------------"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$&#123;var1%pattern2&#125;  ='</span> <span class="string">"<span class="variable">$&#123;var1%$pattern2&#125;</span>"</span>     <span class="comment">#     abcd12345a</span></div><div class="line"><span class="comment"># Shortest possible match, strips out last 6 characters  abcd12345abc6789</span></div><div class="line"><span class="comment">#                                     ^^^^                         |----|</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$&#123;var1%%pattern2&#125; ='</span> <span class="string">"<span class="variable">$&#123;var1%%$pattern2&#125;</span>"</span>    <span class="comment">#     a</span></div><div class="line"><span class="comment"># Longest possible match, strips out last 12 characters  abcd12345abc6789</span></div><div class="line"><span class="comment">#                                    ^^^^                 |-------------|</span></div><div class="line"></div><div class="line"><span class="comment"># Remember, # and ## work from the left end (beginning) of string,</span></div><div class="line"><span class="comment">#           % and %% work from the right end.</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h2 id="Example-10-11-Renaming-file-extensions"><a href="#Example-10-11-Renaming-file-extensions" class="headerlink" title="Example 10-11. Renaming file extensions:"></a>Example 10-11. Renaming file extensions:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># rfe.sh: Renaming file extensions.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#         rfe old_extension new_extension</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Example:</span></div><div class="line"><span class="comment"># To rename all *.gif files in working directory to *.jpg,</span></div><div class="line"><span class="comment">#          rfe gif jpg</span></div><div class="line"></div><div class="line"></div><div class="line">E_BADARGS=65</div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="variable">$#</span> <span class="keyword">in</span></div><div class="line">  0|1)             <span class="comment"># The vertical bar means "or" in this context.</span></div><div class="line">  <span class="built_in">echo</span> <span class="string">"Usage: `basename <span class="variable">$0</span>` old_file_suffix new_file_suffix"</span></div><div class="line">  <span class="built_in">exit</span> <span class="variable">$E_BADARGS</span>  <span class="comment"># If 0 or 1 arg, then bail out.</span></div><div class="line">  ;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> *.<span class="variable">$1</span></div><div class="line"><span class="comment"># Traverse list of files ending with 1st argument.</span></div><div class="line"><span class="keyword">do</span></div><div class="line">  mv <span class="variable">$filename</span> <span class="variable">$&#123;filename%$1&#125;</span><span class="variable">$2</span></div><div class="line">  <span class="comment">#  Strip off part of filename matching 1st argument,</span></div><div class="line">  <span class="comment">#+ then append 2nd argument.</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h2 id="Variable-expansion-Substring-replacement"><a href="#Variable-expansion-Substring-replacement" class="headerlink" title="Variable expansion / Substring replacement"></a>Variable expansion / Substring replacement</h2><p>These constructs have been adopted from <code>ksh</code>.</p>
<h3 id="var-pos"><a href="#var-pos" class="headerlink" title="${var:pos}"></a>${var:pos}</h3><p>Variable <code>var</code> expanded, starting from offset <code>pos</code>.</p>
<h3 id="var-pos-len"><a href="#var-pos-len" class="headerlink" title="${var:pos:len}"></a>${var:pos:len}</h3><p>Expansion to a max of <code>len</code> characters of variable <code>var</code>, from offset <code>pos</code>. See Example A-13 for an example of the creative use of this operator.</p>
<h3 id="var-Pattern-Replacement"><a href="#var-Pattern-Replacement" class="headerlink" title="${var/Pattern/Replacement}"></a>${var/Pattern/Replacement}</h3><p>First match of <code>Pattern</code>, within <code>var</code> replaced with <code>Replacement</code>.</p>
<p>If <code>Replacement</code> is omitted, then the first match of <code>Pattern</code> is replaced by nothing, that is, deleted.</p>
<h3 id="var-Pattern-Replacement-1"><a href="#var-Pattern-Replacement-1" class="headerlink" title="${var//Pattern/Replacement}"></a>${var//Pattern/Replacement}</h3><p>Global replacement. All matches of <code>Pattern</code>, within <code>var</code> replaced with <code>Replacement</code>.</p>
<p>As above, if <code>Replacement</code> is omitted, then all occurrences of <code>Pattern</code> are replaced by nothing, that is, deleted.</p>
<h2 id="Example-10-12-Using-pattern-matching-to-parse-arbitrary-strings"><a href="#Example-10-12-Using-pattern-matching-to-parse-arbitrary-strings" class="headerlink" title="Example 10-12. Using pattern matching to parse arbitrary strings"></a>Example 10-12. Using pattern matching to parse arbitrary strings</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">var1=abcd-1234-defg</div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 = <span class="variable">$var1</span>"</span></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;var1#*-*&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 (with everything, up to and including first - stripped out) = <span class="variable">$t</span>"</span></div><div class="line"><span class="comment">#  t=$&#123;var1#*-&#125;  works just the same,</span></div><div class="line"><span class="comment">#+ since # matches the shortest string,</span></div><div class="line"><span class="comment">#+ and * matches everything preceding, including an empty string.</span></div><div class="line"><span class="comment"># (Thanks, Stephane Chazelas, for pointing this out.)</span></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;var1##*-*&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"If var1 contains a \"-\", returns empty string...   var1 = <span class="variable">$t</span>"</span></div><div class="line"></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;var1%*-*&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"var1 (with everything from the last - on stripped out) = <span class="variable">$t</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="comment"># -------------------------------------------</span></div><div class="line">path_name=/home/bozo/ideas/thoughts.for.today</div><div class="line"><span class="comment"># -------------------------------------------</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"path_name = <span class="variable">$path_name</span>"</span></div><div class="line">t=<span class="variable">$&#123;path_name##/*/&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"path_name, stripped of prefixes = <span class="variable">$t</span>"</span></div><div class="line"><span class="comment"># Same effect as   t=`basename $path_name` in this particular case.</span></div><div class="line"><span class="comment">#  t=$&#123;path_name%/&#125;; t=$&#123;t##*/&#125;   is a more general solution,</span></div><div class="line"><span class="comment">#+ but still fails sometimes.</span></div><div class="line"><span class="comment">#  If $path_name ends with a newline, then `basename $path_name` will not work,</span></div><div class="line"><span class="comment">#+ but the above expression will.</span></div><div class="line"><span class="comment"># (Thanks, S.C.)</span></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;path_name%/*.*&#125;</span></div><div class="line"><span class="comment"># Same effect as   t=`dirname $path_name`</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"path_name, stripped of suffixes = <span class="variable">$t</span>"</span></div><div class="line"><span class="comment"># These will fail in some cases, such as "../", "/foo////", # "foo/", "/".</span></div><div class="line"><span class="comment">#  Removing suffixes, especially when the basename has no suffix,</span></div><div class="line"><span class="comment">#+ but the dirname does, also complicates matters.</span></div><div class="line"><span class="comment"># (Thanks, S.C.)</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;path_name:11&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span>, with first 11 chars stripped off = <span class="variable">$t</span>"</span></div><div class="line">t=<span class="variable">$&#123;path_name:11:5&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span>, with first 11 chars stripped off, length 5 = <span class="variable">$t</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line">t=<span class="variable">$&#123;path_name/bozo/clown&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span> with \"bozo\" replaced  by \"clown\" = <span class="variable">$t</span>"</span></div><div class="line">t=<span class="variable">$&#123;path_name/today/&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span> with \"today\" deleted = <span class="variable">$t</span>"</span></div><div class="line">t=<span class="variable">$&#123;path_name//o/O&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span> with all o's capitalized = <span class="variable">$t</span>"</span></div><div class="line">t=<span class="variable">$&#123;path_name//o/&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$path_name</span> with all o's deleted = <span class="variable">$t</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h3 id="var-Pattern-Replacement-2"><a href="#var-Pattern-Replacement-2" class="headerlink" title="${var/#Pattern/Replacement}"></a>${var/#Pattern/Replacement}</h3><p>If <code>prefix</code> of var matches Pattern, then substitute <code>Replacement</code> for <code>Pattern</code>.</p>
<h3 id="var-Pattern-Replacement-3"><a href="#var-Pattern-Replacement-3" class="headerlink" title="${var/%Pattern/Replacement}"></a>${var/%Pattern/Replacement}</h3><p>If <code>suffix</code> of var matches Pattern, then substitute <code>Replacement</code> for <code>Pattern</code>.</p>
<h2 id="Example-10-13-Matching-patterns-at-prefix-or-suffix-of-string"><a href="#Example-10-13-Matching-patterns-at-prefix-or-suffix-of-string" class="headerlink" title="Example 10-13. Matching patterns at prefix or suffix of string"></a>Example 10-13. Matching patterns at prefix or suffix of string</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># var-match.sh:</span></div><div class="line"><span class="comment"># Demo of pattern replacement at prefix / suffix of string.</span></div><div class="line"></div><div class="line">v0=abc1234zip1234abc    <span class="comment"># Original variable.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"v0 = <span class="variable">$v0</span>"</span>         <span class="comment"># abc1234zip1234abc</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="comment"># Match at prefix (beginning) of string.</span></div><div class="line">v1=<span class="variable">$&#123;v0/#abc/ABCDEF&#125;</span>    <span class="comment"># abc1234zip1234abc</span></div><div class="line">                        <span class="comment"># |-|</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"v1 = <span class="variable">$v1</span>"</span>         <span class="comment"># ABCDEF1234zip1234abc</span></div><div class="line">                        <span class="comment"># |----|</span></div><div class="line"></div><div class="line"><span class="comment"># Match at suffix (end) of string.</span></div><div class="line">v2=<span class="variable">$&#123;v0/%abc/ABCDEF&#125;</span>    <span class="comment"># abc1234zip123abc</span></div><div class="line">                        <span class="comment">#              |-|</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"v2 = <span class="variable">$v2</span>"</span>         <span class="comment"># abc1234zip1234ABCDEF</span></div><div class="line">                        <span class="comment">#               |----|</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span></div><div class="line"></div><div class="line"><span class="comment">#  ----------------------------------------------------</span></div><div class="line"><span class="comment">#  Must match at beginning / end of string,</span></div><div class="line"><span class="comment">#+ otherwise no replacement results.</span></div><div class="line"><span class="comment">#  ----------------------------------------------------</span></div><div class="line">v3=<span class="variable">$&#123;v0/#123/000&#125;</span>       <span class="comment"># Matches, but not at beginning.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"v3 = <span class="variable">$v3</span>"</span>         <span class="comment"># abc1234zip1234abc</span></div><div class="line">                        <span class="comment"># NO REPLACEMENT.</span></div><div class="line">v4=<span class="variable">$&#123;v0/%123/000&#125;</span>       <span class="comment"># Matches, but not at end.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"v4 = <span class="variable">$v4</span>"</span>         <span class="comment"># abc1234zip1234abc</span></div><div class="line">                        <span class="comment"># NO REPLACEMENT.</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h3 id="varprefix-varprefix"><a href="#varprefix-varprefix" class="headerlink" title="${!varprefix*}, ${!varprefix@}"></a>${!varprefix*}, ${!varprefix@}</h3><p>Matches <code>names</code> of all previously declared variables beginning with <code>varprefix</code>.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="comment"># This is a variation on indirect reference, but with a * or @.</span></div><div class="line"><span class="comment"># Bash, version 2.04, adds this feature.</span></div><div class="line"></div><div class="line">xyz23=whatever</div><div class="line">xyz24=</div><div class="line"></div><div class="line">a=<span class="variable">$&#123;!xyz*&#125;</span>         <span class="comment">#  Expands to *names* of declared variables</span></div><div class="line"><span class="comment"># ^ ^   ^           + beginning with "xyz".</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment">#  a = xyz23 xyz24</span></div><div class="line">a=<span class="variable">$&#123;!xyz@&#125;</span>         <span class="comment">#  Same as above.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a = <span class="variable">$a</span>"</span>      <span class="comment">#  a = xyz23 xyz24</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"---"</span></div><div class="line"></div><div class="line">abc23=something_else</div><div class="line">b=<span class="variable">$&#123;!abc*&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"b = <span class="variable">$b</span>"</span>      <span class="comment">#  b = abc23</span></div><div class="line">c=<span class="variable">$&#123;!b&#125;</span>            <span class="comment">#  Now, the more familiar type of indirect reference.</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$c</span>            <span class="comment">#  something_else</span></div></pre></td></tr></table></figure>
<h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><p>[1] If <code>$parameter</code> is null in a non-interactive script, it will terminate with a <a href="http://www.tldp.org/LDP/abs/html/exitcodes.html#EXITCODESREF" target="_blank" rel="external">127 exit status</a> (the Bash error code for &quot;command not found&quot;).</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="http://www.tldp.org/LDP/abs/html/parameter-substitution.html" target="_blank" rel="external">10.2. Parameter Substitution</a></li>
<li><a href="http://www.tldp.org/LDP/abs/html/index.html" target="_blank" rel="external">Advanced Bash-Scripting Guide</a></li>
</ol>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/java/2016/06/10/logback-spring-boot-xml-configuration.html" rel="next" title="logback.xml configuration example">
                上一篇：logback.xml configuration example
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/linux/2016/06/19/howto-tcp-keep-alive.html" rel="prev" title="howto tcp keep-alive">
                下一篇：howto tcp keep-alive
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/blog/images/avatar.jpg"
               alt="yuweijun" />
          <p class="site-author-name" itemprop="name">yuweijun</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">441</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/blog/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yuweijun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/yuweijun" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Manipulating-and-or-expanding-variables"><span class="nav-number">1.</span> <span class="nav-text">Manipulating and/or expanding variables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#parameter"><span class="nav-number">1.1.</span> <span class="nav-text">${parameter}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameter-default-parameter-default"><span class="nav-number">1.2.</span> <span class="nav-text">${parameter-default}, ${parameter:-default}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Note"><span class="nav-number">1.3.</span> <span class="nav-text">Note</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameter-default-parameter-default-1"><span class="nav-number">1.4.</span> <span class="nav-text">${parameter=default}, ${parameter:=default}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameter-alt-value-parameter-alt-value"><span class="nav-number">1.5.</span> <span class="nav-text">${parameter+alt_value}, ${parameter:+alt_value}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameter-err-msg-parameter-err-msg"><span class="nav-number">1.6.</span> <span class="nav-text">${parameter?err_msg}, ${parameter:?err_msg}</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-7-Using-parameter-substitution-and-error-messages"><span class="nav-number">2.</span> <span class="nav-text">Example 10-7. Using parameter substitution and error messages</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-8-Parameter-substitution-and-quot-usage-quot-messages"><span class="nav-number">3.</span> <span class="nav-text">Example 10-8. Parameter substitution and "usage" messages</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Variable-length-Substring-removal"><span class="nav-number">4.</span> <span class="nav-text">Variable length / Substring removal</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#num-var"><span class="nav-number">4.1.</span> <span class="nav-text">${#var}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Note-1"><span class="nav-number">4.2.</span> <span class="nav-text">Note</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-9-Length-of-a-variable"><span class="nav-number">5.</span> <span class="nav-text">Example 10-9. Length of a variable</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-var-Pattern"><span class="nav-number">5.1.</span> <span class="nav-text">${var#Pattern}, ${var##Pattern}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-var-Pattern-1"><span class="nav-number">5.2.</span> <span class="nav-text">${var%Pattern}, ${var%%Pattern}</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-10-Pattern-matching-in-parameter-substitution"><span class="nav-number">6.</span> <span class="nav-text">Example 10-10. Pattern matching in parameter substitution</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-11-Renaming-file-extensions"><span class="nav-number">7.</span> <span class="nav-text">Example 10-11. Renaming file extensions:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Variable-expansion-Substring-replacement"><span class="nav-number">8.</span> <span class="nav-text">Variable expansion / Substring replacement</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#var-pos"><span class="nav-number">8.1.</span> <span class="nav-text">${var:pos}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-pos-len"><span class="nav-number">8.2.</span> <span class="nav-text">${var:pos:len}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-Replacement"><span class="nav-number">8.3.</span> <span class="nav-text">${var/Pattern/Replacement}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-Replacement-1"><span class="nav-number">8.4.</span> <span class="nav-text">${var//Pattern/Replacement}</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-12-Using-pattern-matching-to-parse-arbitrary-strings"><span class="nav-number">9.</span> <span class="nav-text">Example 10-12. Using pattern matching to parse arbitrary strings</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-Replacement-2"><span class="nav-number">9.1.</span> <span class="nav-text">${var/#Pattern/Replacement}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-Pattern-Replacement-3"><span class="nav-number">9.2.</span> <span class="nav-text">${var/%Pattern/Replacement}</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-10-13-Matching-patterns-at-prefix-or-suffix-of-string"><span class="nav-number">10.</span> <span class="nav-text">Example 10-13. Matching patterns at prefix or suffix of string</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#varprefix-varprefix"><span class="nav-number">10.1.</span> <span class="nav-text">${!varprefix*}, ${!varprefix@}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Notes"><span class="nav-number">10.2.</span> <span class="nav-text">Notes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">11.</span> <span class="nav-text">References</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-github"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuweijun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist.KISS
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
