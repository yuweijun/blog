<!doctype html>




<html class="theme-next mist">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">


















  

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">






  <link rel="alternate" href="/blog/atom.xml" title="一" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=5.0.1">






<meta property="og:type" content="website">
<meta property="og:title" content="一">
<meta property="og:url" content="http://www.4e00.com/page/9/index.html">
<meta property="og:site_name" content="一">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: false,
    motion: false,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://www.4e00.com/blog/page/9/">

  <title> 一 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/" class="brand" rel="start">
      <span class="site-title">一</span>
    </a>
  </div>
  <p class="site-subtitle">{"type":"编程笔记"}</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      <li class="menu-item menu-item-search">
        <a href="https://www.google.com.hk/search?q=site%3Ahttp://www.4e00.com/blog/" class="popup-trigger">
          <i class="menu-item-icon fa fa-search fa-fw"></i>Search
        </a>
      </li>
    </ul>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/java/2018/04/21/percent-encoding-in-rfc1738-rfc2396-and-rfc3986.html" itemprop="url">
                  percent encoding in rfc1738 rfc2396 and rfc3986
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2018-04-21T13:14:43+08:00" content="2018-04-21">
              2018-04-21
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="URI-amp-amp-URL"><a href="#URI-amp-amp-URL" class="headerlink" title="URI &amp;&amp; URL"></a>URI &amp;&amp; URL</h2><p><code>URI</code>（统一资源标识）定义在<code>RFC 3986</code>中，<code>URL</code>（统一资源地址）是<code>URI</code>的一种特殊形式，提供了资源的网络位置。<code>URL</code>最初的标准<code>RFC 1738</code>已经废弃，其中定义了<code>URL</code>，域名，<code>IP</code>地址，<code>application/x-www-form-urlencoded</code>格式。</p>
<h3 id="encode-amp-amp-decode-URI"><a href="#encode-amp-amp-decode-URI" class="headerlink" title="encode &amp;&amp; decode URI"></a>encode &amp;&amp; decode URI</h3><p><code>encode</code>是将<code>URI</code>根据<code>RFC</code>规范定义的<code>reserved</code>和<code>unreserved</code>之外的所有字符都<code>percent-encoding</code>转义，避免解析时产生岐义和错误。比如，一个用户可能会输入<code>Thyme &amp;time=again</code>作为 comment 变量的一部分。如果不使用<code>encodeURIComponent</code>对此内容进行转义，服务器得到的将是<code>comment=Thyme%20&amp;time=again</code>。请注意，<code>&amp;</code>符号和<code>=</code>符号产生了一个新的键值对，所以服务器得到两个键值对（一个键值对是<code>comment=Thyme</code>，另一个则是<code>time=again</code>），而不是一个键值对。</p>
<p><code>encode</code>和<code>decode</code>一般是配对使用，比如表单 POST 提交的内容是按<code>application/x-www-form-urlencoded</code>编码提交到后台的，可以用 PHP 的<code>urldecode</code>方法解码，在 Java 中则可以用<code>java.net.URLDecode.decode(String s, String enc)</code>方法来解码。如果前端使用<code>encodeURIComponent</code>编码后 ajax POST 到后端，则需要用 PHP 中的<code>rawurlencode</code>解码，在 Java 中则可以用 spring 的工具类<code>org.springframework.web.util.UriUtils.decode(String source, String encoding)</code>解码。</p>
<h3 id="application-x-www-form-urlencoded-编码规则"><a href="#application-x-www-form-urlencoded-编码规则" class="headerlink" title="application/x-www-form-urlencoded 编码规则"></a>application/x-www-form-urlencoded 编码规则</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">5.2. application/x-www-form-urlencoded serializing</span><span class="line">The application/x-www-form-urlencoded byte serializer takes a byte sequence input and then runs these steps:</span><span class="line"></span><span class="line">Let output be the empty string.</span><span class="line"></span><span class="line">For each byte in input, depending on byte:</span><span class="line"></span><span class="line">0x20 (SP)</span><span class="line">Append U+002B (+) to output.</span><span class="line"></span><span class="line">0x2A (*)</span><span class="line">0x2D (-)</span><span class="line">0x2E (.)</span><span class="line">0x30 (0) to 0x39 (9)</span><span class="line">0x41 (A) to 0x5A (Z)</span><span class="line">0x5F (_)</span><span class="line">0x61 (a) to 0x7A (z)</span><span class="line">Append a code point whose value is byte to output.</span><span class="line"></span><span class="line">Otherwise</span><span class="line">Append byte, percent encoded, to output.</span><span class="line"></span><span class="line">Return output.</span></pre></td></tr></table></figure>
<p>如上<code>application/x-www-form-urlencoded</code>编码规则，<code>alphanumeric</code>、<code>*</code>、<code>-</code>、<code>.</code>、<code>_</code>不进行编码，空格则编码成<code>+</code>，其他字符全部需要编码，这就是为什么 Google 搜索时空格在<code>URL</code>上会变成<code>+</code>而不是<code>%20</code>。</p>
<h2 id="RFC-3986-中字符定义"><a href="#RFC-3986-中字符定义" class="headerlink" title="RFC 3986 中字符定义"></a>RFC 3986 中字符定义</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RFC 3986                   URI Generic Syntax               January 2005</span><span class="line"></span><span class="line">2.1.  Percent-Encoding</span><span class="line"></span><span class="line">   A percent-encoding mechanism is used to represent a data octet in a</span><span class="line">   component when that octet&apos;s corresponding character is outside the</span><span class="line">   allowed set or is being used as a delimiter of, or within, the</span><span class="line">   component.  A percent-encoded octet is encoded as a character</span><span class="line">   triplet, consisting of the percent character &quot;%&quot; followed by the two</span><span class="line">   hexadecimal digits representing that octet&apos;s numeric value.  For</span><span class="line">   example, &quot;%20&quot; is the percent-encoding for the binary octet</span><span class="line">   &quot;00100000&quot; (ABNF: %x20), which in US-ASCII corresponds to the space</span><span class="line">   character (SP).  Section 2.4 describes when percent-encoding and</span><span class="line">   decoding is applied.</span><span class="line"></span><span class="line">      pct-encoded = &quot;%&quot; HEXDIG HEXDIG</span><span class="line"></span><span class="line">   The uppercase hexadecimal digits &apos;A&apos; through &apos;F&apos; are equivalent to</span><span class="line">   the lowercase digits &apos;a&apos; through &apos;f&apos;, respectively.  If two URIs</span><span class="line">   differ only in the case of hexadecimal digits used in percent-encoded</span><span class="line">   octets, they are equivalent.  For consistency, URI producers and</span><span class="line">   normalizers should use uppercase hexadecimal digits for all percent-</span><span class="line">   encodings.</span><span class="line"></span><span class="line">2.2.  Reserved Characters</span><span class="line"></span><span class="line">   URIs include components and subcomponents that are delimited by</span><span class="line">   characters in the &quot;reserved&quot; set.  These characters are called</span><span class="line">   &quot;reserved&quot; because they may (or may not) be defined as delimiters by</span><span class="line">   the generic syntax, by each scheme-specific syntax, or by the</span><span class="line">   implementation-specific syntax of a URI&apos;s dereferencing algorithm.</span><span class="line">   If data for a URI component would conflict with a reserved</span><span class="line">   character&apos;s purpose as a delimiter, then the conflicting data must be</span><span class="line">   percent-encoded before the URI is formed.</span><span class="line"></span><span class="line">  reserved    = gen-delims / sub-delims</span><span class="line"></span><span class="line">      gen-delims  = &quot;:&quot; / &quot;/&quot; / &quot;?&quot; / &quot;#&quot; / &quot;[&quot; / &quot;]&quot; / &quot;@&quot;</span><span class="line"></span><span class="line">      sub-delims  = &quot;!&quot; / &quot;$&quot; / &quot;&amp;&quot; / &quot;&apos;&quot; / &quot;(&quot; / &quot;)&quot;</span><span class="line">                  / &quot;*&quot; / &quot;+&quot; / &quot;,&quot; / &quot;;&quot; / &quot;=&quot;</span><span class="line"></span><span class="line">2.3.  Unreserved Characters</span><span class="line"></span><span class="line">   Characters that are allowed in a URI but do not have a reserved</span><span class="line">   purpose are called unreserved.  These include uppercase and lowercase</span><span class="line">   letters, decimal digits, hyphen, period, underscore, and tilde.</span><span class="line"></span><span class="line">      unreserved  = ALPHA / DIGIT / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;</span></pre></td></tr></table></figure>
<h2 id="RFC-2396-中的部分字符定义"><a href="#RFC-2396-中的部分字符定义" class="headerlink" title="RFC 2396 中的部分字符定义"></a>RFC 2396 中的部分字符定义</h2><p>Javascript 中的<code>encodeURI</code>方法对于<code>rfc2396</code>中定义的<code>reserved</code>和<code>unreserved</code>这2个字符集中的字符都不会进行转义。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2.2. Reserved Characters</span><span class="line"></span><span class="line">      reserved    = &quot;;&quot; | &quot;/&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; |</span><span class="line">                    &quot;$&quot; | &quot;,&quot;</span><span class="line"></span><span class="line">2.3. Unreserved Characters</span><span class="line"></span><span class="line">      unreserved  = alphanum | mark</span><span class="line"></span><span class="line">      mark        = &quot;-&quot; | &quot;_&quot; | &quot;.&quot; | &quot;!&quot; | &quot;~&quot; | &quot;*&quot; | &quot;&apos;&quot; | &quot;(&quot; | &quot;)&quot;</span></pre></td></tr></table></figure>
<h2 id="RFC-1738-中部分字符定义"><a href="#RFC-1738-中部分字符定义" class="headerlink" title="RFC 1738 中部分字符定义"></a>RFC 1738 中部分字符定义</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RFC 1738            Uniform Resource Locators (URL)        December 1994</span><span class="line"></span><span class="line">safe           = &quot;$&quot; | &quot;-&quot; | &quot;_&quot; | &quot;.&quot; | &quot;+&quot;</span><span class="line">extra          = &quot;!&quot; | &quot;*&quot; | &quot;&apos;&quot; | &quot;(&quot; | &quot;)&quot; | &quot;,&quot;</span><span class="line"></span><span class="line">reserved       = &quot;;&quot; | &quot;/&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot;</span><span class="line">hex            = digit | &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; |</span><span class="line">                 &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot;</span><span class="line">escape         = &quot;%&quot; hex hex</span><span class="line"></span><span class="line">unreserved     = alpha | digit | safe | extra</span></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/java/2018/04/21/percent-encoding-in-rfc1738-rfc2396-and-rfc3986.html#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/mysql/2018/04/13/the-best-commands-mycli.html" itemprop="url">
                  命令行神器之 mycli 篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2018-04-13T22:38:55+08:00" content="2018-04-13">
              2018-04-13
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="init-mycli-config-file"><a href="#init-mycli-config-file" class="headerlink" title="init mycli config file"></a>init mycli config file</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">git</span> <span class="built_in">clone</span> https://github.com/yuweijun/mycli.git</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">cd</span> mycli</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">mkdir</span> -p ~/.mysql/out</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ln</span> -s myclirc ~/.myclirc</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ln</span> -s my.cnf ~/.my.cnf</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ln</span> -s my.vim ~/.my.vim</span></pre></td></tr></table></figure>
<h2 id="log-query-sql-and-result"><a href="#log-query-sql-and-result" class="headerlink" title="log query sql and result"></a>log query sql and result</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">mycli</span> -u root -p password -D database -l ~/.mysql/audit.log</span></pre></td></tr></table></figure>
<p>按<code>,e</code>关闭弹出的<code>vim</code>窗口，按<code>,w</code>保存查询SQL的结果到<code>~/.mysql/out/[0-9]{10}.log</code>文件中，并关闭<code>vim</code>窗口。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/mysql/2018/04/13/the-best-commands-mycli.html#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/linux/2018/04/07/the-best-commands-ssh.html" itemprop="url">
                  命令行神器之 ssh 篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2018-04-07T11:02:17+08:00" content="2018-04-07">
              2018-04-07
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="tldr-ssh"><a href="#tldr-ssh" class="headerlink" title="tldr ssh"></a>tldr ssh</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line output">Secure Shell is a protocol used to securely <span class="built_in">log</span> onto remote systems.</span><span class="line output">It can be used <span class="keyword">for</span> logging or executing commands on a remote server.</span><span class="line output"></span><span class="line output">- Connect to a remote server:</span><span class="line">      ssh username@remote_host</span><span class="line output"></span><span class="line output">- Connect to a remote server with a specific identity (private key):</span><span class="line">      ssh -i path/to/key_file username@remote_host</span><span class="line output"></span><span class="line output">- Connect to a remote server using a specific port:</span><span class="line">      ssh username@remote_host -p 2222</span><span class="line output"></span><span class="line output">- Run a <span class="built_in">command</span> on a remote server:</span><span class="line">      ssh remote_host <span class="built_in">command</span> -with -flags</span><span class="line output"></span><span class="line output">- SSH tunneling: Dynamic port forwarding (SOCKS proxy on localhost:9999):</span><span class="line">      ssh -D 9999 -C username@remote_host</span><span class="line output"></span><span class="line output">- SSH tunneling: Forward a specific port (localhost:9999 to slashdot.org:80):</span><span class="line">      ssh -L 9999:slashdot.org:80 username@remote_host</span><span class="line output"></span><span class="line output">- Enable the option to forward the authentication information to the remote machine (see `man ssh_config` <span class="keyword">for</span> available options):</span><span class="line">      ssh -o <span class="string">"ForwardAgent=yes"</span> username@remote_host</span></pre></td></tr></table></figure>
<h2 id="using-ssh-agent"><a href="#using-ssh-agent" class="headerlink" title="using ssh agent"></a>using ssh agent</h2><p><code>ssh-agent</code>命令是一种用来保存公钥身份验证所使用的私钥的程序，本质上<code>ssh-agent</code>就是一个<strong>密钥管理器</strong>，运行<code>ssh-agent</code>以后，使用<code>ssh-add</code>将私钥交给<code>ssh-agent</code>保管，其他程序需要身份验证的时候可以将验证申请交给<code>ssh-agent</code>来完成整个认证过程。</p>
<p>关于<code>ssh-agent</code>的工作原理可以查看<a href="http://www.unixwiz.net/techtips/ssh-agent-forwarding.html" target="_blank" rel="noopener">An Illustrated Guide to SSH Agent Forwarding</a>这篇文章，这里简单举例子说明其作用：</p>
<p>假设当前机器为<code>A</code>，另有远程服务器<code>B</code>、<code>C</code>、<code>D</code>，将<code>A</code>的公钥发布到3台远程服务器上，在机器<code>A</code>开启<code>ssh-agent</code>，然后<code>ssh-add</code>当前<code>A</code>机器的私钥，并且在<code>~/.ssh/config</code>中开启转发<code>ForwardAgent yes</code>，这样<code>B</code>、<code>C</code>和<code>D</code>三台服务器之间 ssh 登录都可以通过<code>A</code>的这个公钥进行验证登录，而不用配置<code>A</code>的私钥，比如先 ssh 到<code>B</code>，可以从<code>B</code>直接 ssh 到<code>C</code>和<code>D</code>。</p>
<h3 id="A-机器执行的命令"><a href="#A-机器执行的命令" class="headerlink" title="A 机器执行的命令"></a>A 机器执行的命令</h3><p><code>B</code>，<code>C</code>和<code>D</code>服务器上只要开启<code>sshd</code>服务，并且将用户目录下面的<code>~/.ssh</code>目录备份删除掉。<code>A</code>机器上备份删除原来的<code>~/.ssh</code>目录后，执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line output"><span class="comment"># 创建密钥</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-keygen</span> -t rsa -C <span class="string">"username@A"</span></span><span class="line"></span><span class="line output"><span class="comment"># 一般 Mac OSX 和 Linux 都已经开启`ssh-agent`服务，可以使用以下命令确认</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">echo</span> <span class="string">"<span class="variable">$SSH_AUTH_SOCK</span>"</span></span><span class="line"></span><span class="line output"><span class="comment"># 如果没有开启 ssh-agent，则手动输入下面这个命令</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><span class="line"></span><span class="line output"><span class="comment"># 显示ssh-agent中的公钥</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-add</span> -L</span><span class="line"></span><span class="line output"><span class="comment"># 如果没有显示任何公钥信息，则手动加入个人的密钥</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-add</span> ~/.ssh/id_rsa</span><span class="line"></span><span class="line output"><span class="comment"># 开启转发，一定要有这个配置，不然开启了 ssh-agent 也不会转发</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">echo</span> <span class="string">"Host *\n    ForwardAgent yes"</span> &gt; ~/.ssh/config</span><span class="line"></span><span class="line output"><span class="comment"># 用 ssh-copy-id 命令发布 A 机器的公钥到 B，C，D 服务器上，不要手动去创建目录和文件</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-copy-id</span> username@B</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-copy-id</span> username@C</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-copy-id</span> username@D</span></pre></td></tr></table></figure>
<h3 id="检查本地被代理的密钥"><a href="#检查本地被代理的密钥" class="headerlink" title="检查本地被代理的密钥"></a>检查本地被代理的密钥</h3><ul>
<li>-L：显示ssh-agent中的公钥</li>
<li>-l：显示ssh-agent中的密钥</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-add</span> -L</span><span class="line output">The agent has no identities.</span></pre></td></tr></table></figure>
<p>如果提示如上，则目前没有代理任何密钥，Linux 上可以通过<code>ssh-add ~/.ssh/id_rsa</code>命令添加指定的密钥。Mac OSX 上启动和添加密钥的操作说明，可以参考<a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" target="_blank" rel="noopener">github</a>文档的说明：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Note: The -K option is Apple standard version of ssh-add, which stores the passphrase in your keychain for you when you add an ssh key to the ssh-agent.</span></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-add</span> -K ~/.ssh/id_rsa</span><span class="line output">Passphrase stored <span class="keyword">in</span> keychain: /Users/username/.ssh/id_rsa</span><span class="line output">Identity added: /Users/username/.ssh/id_rsa (/Users/username/.ssh/id_rsa)</span><span class="line"></span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh-add</span> -L</span><span class="line output">2048 2f:31:ba:0c:3e:b2:70:52:00:bc:85:37:a2:a7:77:ad /Users/username/.ssh/id_rsa (RSA)</span></pre></td></tr></table></figure>
<h2 id="ssh-t-jumpbox-server-ssh-remote-server"><a href="#ssh-t-jumpbox-server-ssh-remote-server" class="headerlink" title="ssh -t jumpbox.server ssh remote.server"></a>ssh -t jumpbox.server ssh remote.server</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh</span> -t -i ~/.ssh/jumpbox_rsa.pub username@jumpbox.server ssh username@remote.server</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh</span> -t username@jumpbox.server ssh username@remote.server</span></pre></td></tr></table></figure>
<h3 id="ssh-config-文件配置"><a href="#ssh-config-文件配置" class="headerlink" title="~/.ssh/config 文件配置"></a>~/.ssh/config 文件配置</h3><p>上面的命令参数有点多，通过配置<code>~/.ssh/config</code>文件，可以简化<code>ssh</code>命令连接常用服务器的参数：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host *</span><span class="line">    ForwardAgent yes</span><span class="line"></span><span class="line">Host jumpbox.server</span><span class="line">    HostName 192.168.1.11</span><span class="line">    User username</span><span class="line">    IdentityFile ~/.ssh/jumpbox_rsa.pub</span><span class="line">    ControlMaster auto</span><span class="line">    ControlPath ~/.ssh/socket/master-%l-%r@%h:%p</span><span class="line"></span><span class="line">Host remote.server1</span><span class="line">    HostName 192.168.1.2</span><span class="line">    User username</span><span class="line">    Port 22</span><span class="line">    ForwardAgent yes</span><span class="line">    ProxyCommand ssh -i ~/.ssh/jumpbox_rsa.pub username@remote.server &apos;nc %h %p&apos;</span><span class="line"></span><span class="line">Host remote.server2</span><span class="line">    HostName 192.168.1.3</span><span class="line">    User username</span><span class="line">    Port 22</span><span class="line">    ForwardAgent yes</span><span class="line">    ProxyCommand ssh jumpbox.server nc %h %p</span></pre></td></tr></table></figure>
<p>如上配置之后，就不用在命令行里每次显示的指定<code>jumpbox.server</code>，可以直接连接远程服务器，这里服务器的别名不需要 DNS 解析，<code>ssh</code>会从<code>~/.ssh/config</code>中获取服务器地址：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh</span> remote.server1</span><span class="line"><i class="fa fa-usd"></i> <span class="built_in">ssh</span> remote.server2</span></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/linux/2018/04/07/the-best-commands-ssh.html#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/java/2018/04/06/exec-maven-plugin-run-spring-boot.html" itemprop="url">
                  使用exec-maven-plugin运行spring boot应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2018-04-06T23:41:00+08:00" content="2018-04-06">
              2018-04-06
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Maven 项目中一般使用<code>exec-maven-plugin</code>运行项目中有<code>main</code>方法的类，运行目标为<code>exec:java</code>时常用的参数简单说明如下：</p>
<ul>
<li>exec.mainClass，运行时指定<code>main</code>方法所在 Java 类的完全限定名</li>
<li>exec.args，给<code>main</code>方法的参数</li>
</ul>
<p><code>exec-maven-plugin</code>详细的使用帮助可以用如下命令查看：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">mvn</span> exec:help -Ddetail=<span class="keyword">true</span></span></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/java/2018/04/06/exec-maven-plugin-run-spring-boot.html#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/linux/2018/04/05/linux-commands-dig.html" itemprop="url">
                  linux 常用命令行之 dig
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2018-04-05T12:18:13+08:00" content="2018-04-05">
              2018-04-05
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="//schema.org/Thing">
                  <a href="/blog/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>检查当前网络使用的 DNS 服务器，以及检查不同的 DNS 服务器解析域名的情况，主要使用<code>dig</code>和<code>nslookup</code>，也可以用<code>host</code>检查 DNS 解析情况，下面示例的命令是在 Mac OSX 电脑上运行的。</p>
<h2 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h2><p><code>dig</code>是<code>domain information groper</code>的缩写，<code>man</code>手册上说明简单摘录如下，详细中文说明手册可参考 IBM 的<a href="https://www.ibm.com/support/knowledgecenter/zh/ssw_aix_72/com.ibm.aix.cmds2/dig.htm" target="_blank" rel="noopener">文档</a>:</p>
<blockquote>
<p>dig (domain information groper) is a flexible tool for interrogating DNS name servers. It performs DNS lookups and displays the answers that are returned from the name server(s) that were queried. Most DNS administrators use dig to troubleshoot DNS problems because of its flexibility, ease of use and clarity of output. Other lookup tools tend to have less functionality than dig.</p>
</blockquote>
<p>一个典型的<code>dig</code>调用类似：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">dig</span> @dns-server name <span class="built_in">type</span></span></pre></td></tr></table></figure>
<h3 id="dig命令使用示例"><a href="#dig命令使用示例" class="headerlink" title="dig命令使用示例"></a>dig命令使用示例</h3><p>查看当前电脑使用的 DNS 服务器地址，默认会使用<code>/etc/resolv.conf</code>中的配置。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><i class="fa fa-usd"></i> <span class="built_in">dig</span></span><span class="line output">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt;</span><span class="line output">;; global options: +cmd</span><span class="line output">;; Got answer:</span><span class="line output">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 34872</span><span class="line output">;; flags: qr rd ra; QUERY: 1, ANSWER: 13, AUTHORITY: 0, ADDITIONAL: 0</span><span class="line output">;; QUESTION SECTION:</span><span class="line output">;.                IN  NS</span><span class="line output">;; ANSWER SECTION:</span><span class="line output">.         6795    IN  NS  m.root-servers.net.</span><span class="line output">.         6795    IN  NS  h.root-servers.net.</span><span class="line output">.         6795    IN  NS  d.root-servers.net.</span><span class="line output">.         6795    IN  NS  c.root-servers.net.</span><span class="line output">.         6795    IN  NS  l.root-servers.net.</span><span class="line output">.         6795    IN  NS  i.root-servers.net.</span><span class="line output">.         6795    IN  NS  e.root-servers.net.</span><span class="line output">.         6795    IN  NS  k.root-servers.net.</span><span class="line output">.         6795    IN  NS  f.root-servers.net.</span><span class="line output">.         6795    IN  NS  j.root-servers.net.</span><span class="line output">.         6795    IN  NS  g.root-servers.net.</span><span class="line output">.         6795    IN  NS  b.root-servers.net.</span><span class="line output">.         6795    IN  NS  a.root-servers.net.</span><span class="line output">;; Query time: 6 msec</span><span class="line output">;; SERVER: 202.96.209.133<span class="comment">#53(202.96.209.133)</span></span><span class="line output">;; WHEN: Thu Apr  5 13:28:22 2018</span><span class="line output">;; MSG SIZE  rcvd: 228</span></pre></td></tr></table></figure>
<p>本机<code>/etc/resolv.conf</code>文件配置的内容如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nameserver 202.96.209.133</span><span class="line">nameserver 8.8.8.8</span></pre></td></tr></table></figure>
<p>所以<code>dig</code>命令显示的DNS服务地址是<code>202.96.209.133</code>。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/linux/2018/04/05/linux-commands-dig.html#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/blog/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/99/">99</a><a class="extend next" rel="next" href="/blog/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/blog/images/avatar.jpg" alt="yuweijun">
          <p class="site-author-name" itemprop="name">yuweijun</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">492</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/blog/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yuweijun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/yuweijun" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-github"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuweijun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist.KISS
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
